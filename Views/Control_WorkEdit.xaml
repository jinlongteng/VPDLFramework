<UserControl
    x:Class="VPDLFramework.Views.Control_WorkEdit"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converters="clr-namespace:ValueConverters;assembly=ValueConverters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
    xmlns:local="clr-namespace:VPDLFramework.Views"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:models="clr-namespace:VPDLFramework.Models"
    xmlns:valid="clr-namespace:VPDLFramework.ValidationModels"
    xmlns:views="clr-namespace:VPDLFramework.Views"
    xmlns:xceed="http://schemas.xceed.com/wpf/xaml/toolkit"
    d:DesignHeight="800"
    d:DesignWidth="1200"
    Background="{StaticResource Color_DarkBackground}"
    DataContext="{Binding Source={StaticResource Locator}, Path=Work}"
    mc:Ignorable="d">
    <UserControl.Resources>
        <Style x:Key="Grid_HiddenInVproMode" TargetType="Grid">
            <Style.Triggers>
                <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=local:Control_WorkEdit}, Path=DataContext.IsDLEnable}" Value="false">
                    <Setter Property="Height" Value="0" />
                    <Setter Property="Margin" Value="0" />
                </DataTrigger>
                <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=local:Control_WorkEdit}, Path=DataContext.IsDLEnable}" Value="true">
                    <Setter Property="Height" Value="30" />
                    <Setter Property="Margin" Value="0,2" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </UserControl.Resources>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" MinWidth="200" />
            <ColumnDefinition Width="2" />
            <ColumnDefinition MinWidth="600" />
        </Grid.ColumnDefinitions>
        <GridSplitter
            Grid.Column="1"
            Margin="0,2"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Stretch"
            Background="Transparent" />
        <ListView
            Margin="2"
            Background="{StaticResource Color_DarkBackground}"
            BorderBrush="Gray"
            BorderThickness="2"
            ItemsSource="{Binding EditStreamsViewModel.WorkStreamItemViewModelList}"
            ScrollViewer.HorizontalScrollBarVisibility="Disabled"
            ScrollViewer.VerticalScrollBarVisibility="Disabled">
            <ListView.ItemsPanel>
                <ItemsPanelTemplate>
                    <UniformGrid />
                </ItemsPanelTemplate>
            </ListView.ItemsPanel>
            <ListView.ItemContainerStyle>
                <Style TargetType="ListViewItem">
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="ListViewItem">
                                <views:Control_WorkEditResultViewer
                                    DataContext="{Binding}"
                                    DisplayRecord="{Binding WorkStream.ResultViewModel.ResultRecord}"
                                    RangeImage="{Binding WorkStream.ResultViewModel.RangeImage}" />
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </ListView.ItemContainerStyle>
        </ListView>
        <ScrollViewer
            Grid.Column="2"
            Margin="2"
            VerticalScrollBarVisibility="Auto">
            <Border BorderBrush="Gray" BorderThickness="2">
                <StackPanel Margin="0.5" Orientation="Vertical">
                    <!--  图像源  -->
                    <Expander
                        DataContext="{Binding EditWorkImageSourceViewModel}"
                        Header="{DynamicResource Lan.Control_WorkEdit.HeaderImageSource}"
                        Style="{DynamicResource Style_Expander}">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="25" />
                                <RowDefinition />
                            </Grid.RowDefinitions>
                            <Border />
                            <StackPanel HorizontalAlignment="Right" Orientation="Horizontal">
                                <Button
                                    Width="20"
                                    Height="20"
                                    Margin="2"
                                    Command="{Binding CmdAddImageSource}"
                                    Content="&#xe651;"
                                    FontFamily="{StaticResource Font_Ico}"
                                    FontSize="12"
                                    Style="{StaticResource Style_Button_Ico}"
                                    ToolTip="{DynamicResource Lan.Control_WorkEdit.BtnAdd}" />
                                <Button
                                    Width="20"
                                    Height="20"
                                    Margin="5,2"
                                    Command="{Binding CmdRemoveImageSource}"
                                    CommandParameter="{Binding ElementName=dgImageSources, Path=SelectedValue}"
                                    Content="&#xe67a;"
                                    FontFamily="{StaticResource Font_Ico}"
                                    FontSize="16"
                                    FontWeight="Bold"
                                    Style="{StaticResource Style_Button_Ico}"
                                    ToolTip="{DynamicResource Lan.Control_WorkEdit.BtnRemove}" />
                            </StackPanel>
                            <DataGrid
                                x:Name="dgImageSources"
                                Grid.Row="1"
                                Margin="0.5"
                                ItemsSource="{Binding ImageSourceViewModelList}"
                                Style="{DynamicResource Style_DataGrid}">
                                <DataGrid.Columns>
                                    <DataGridTemplateColumn Width="100" Header="{DynamicResource Lan.Control_WorkEdit.TextName}">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <TextBlock
                                                    Margin="2"
                                                    Padding="2"
                                                    VerticalAlignment="Center"
                                                    Text="{Binding WorkImageSource.ImageSourceInfo.ImageSourceName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>
                                    <DataGridTemplateColumn Width="60" Header="{DynamicResource Lan.Control_WorkEdit.TextCameraMode}">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <CheckBox
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Center"
                                                    IsChecked="{Binding WorkImageSource.ImageSourceInfo.IsUseCam, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>
                                    <DataGridTemplateColumn
                                        Width="*"
                                        Header="{DynamicResource Lan.Control_WorkEdit.TextFolderPath}"
                                        IsReadOnly="True">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <TextBlock
                                                    Padding="2"
                                                    VerticalAlignment="Center"
                                                    Text="{Binding WorkImageSource.ImageSourceInfo.ImageFilePath, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    TextWrapping="Wrap"
                                                    ToolTip="{Binding WorkImageSource.ImageSourceInfo.ImageFilePath}" />
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>
                                    <DataGridTemplateColumn Width="120" Header="{DynamicResource Lan.Control_WorkEdit.TextOperator}">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <Grid>
                                                    <StackPanel
                                                        Margin="2,0"
                                                        VerticalAlignment="Center"
                                                        Orientation="Vertical">
                                                        <Button
                                                            Margin="2"
                                                            Padding="2"
                                                            Command="{Binding CmdEditTBAcq}"
                                                            ToolTip="{DynamicResource Lan.Control_WorkEdit.BtnEditCam}">
                                                            <Grid>
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition />
                                                                    <ColumnDefinition />
                                                                </Grid.ColumnDefinitions>
                                                                <TextBlock
                                                                    Margin="2,0"
                                                                    HorizontalAlignment="Right"
                                                                    VerticalAlignment="Center"
                                                                    FontFamily="{StaticResource Font_Ico}"
                                                                    FontSize="16"
                                                                    Text="&#xe892;" />
                                                                <TextBlock
                                                                    Grid.Column="1"
                                                                    HorizontalAlignment="Left"
                                                                    VerticalAlignment="Center"
                                                                    Text="{DynamicResource Lan.Control_WorkEdit.BtnEditCam}" />
                                                            </Grid>
                                                        </Button>
                                                        <Button
                                                            Margin="2"
                                                            Padding="2"
                                                            Command="{Binding CmdOpenImageFile}"
                                                            ToolTip="{DynamicResource Lan.Control_WorkEdit.BtnSelectPath}">
                                                            <Grid>
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition />
                                                                    <ColumnDefinition />
                                                                </Grid.ColumnDefinitions>
                                                                <TextBlock
                                                                    Margin="2,0"
                                                                    HorizontalAlignment="Right"
                                                                    VerticalAlignment="Center"
                                                                    FontFamily="{StaticResource Font_Ico}"
                                                                    FontSize="16"
                                                                    Text="&#xe66b;" />
                                                                <TextBlock
                                                                    Grid.Column="1"
                                                                    HorizontalAlignment="Left"
                                                                    VerticalAlignment="Center"
                                                                    Text="{DynamicResource Lan.Control_WorkEdit.BtnSelectPath}" />
                                                            </Grid>
                                                        </Button>
                                                        <Button
                                                            Margin="2"
                                                            Padding="2"
                                                            Command="{Binding CmdResetImageSeqConfig}"
                                                            ToolTip="{DynamicResource Lan.Control_WorkEdit.BtnResetImageSequence}">
                                                            <Grid>
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition />
                                                                    <ColumnDefinition />
                                                                </Grid.ColumnDefinitions>
                                                                <TextBlock
                                                                    Margin="2,0"
                                                                    HorizontalAlignment="Right"
                                                                    VerticalAlignment="Center"
                                                                    FontFamily="{StaticResource Font_Ico}"
                                                                    FontSize="16"
                                                                    Text="&#xe630;" />
                                                                <TextBlock
                                                                    Grid.Column="1"
                                                                    HorizontalAlignment="Left"
                                                                    VerticalAlignment="Center"
                                                                    Text="{DynamicResource Lan.Control_WorkEdit.BtnResetImageSequence}" />
                                                            </Grid>
                                                        </Button>
                                                        <Button
                                                            Margin="2"
                                                            Padding="2"
                                                            Command="{Binding CmdRunOnce}"
                                                            ToolTip="{DynamicResource Lan.Control_WorkEdit.BtnRunOnce}">
                                                            <Grid>
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition />
                                                                    <ColumnDefinition />
                                                                </Grid.ColumnDefinitions>
                                                                <TextBlock
                                                                    Margin="2,0"
                                                                    HorizontalAlignment="Right"
                                                                    VerticalAlignment="Center"
                                                                    FontFamily="{StaticResource Font_Ico}"
                                                                    FontSize="16"
                                                                    Text="&#xe8c5;" />
                                                                <TextBlock
                                                                    Grid.Column="1"
                                                                    HorizontalAlignment="Left"
                                                                    VerticalAlignment="Center"
                                                                    Text="{DynamicResource Lan.Control_WorkEdit.BtnRunOnce}" />
                                                            </Grid>
                                                        </Button>
                                                        <ToggleButton
                                                            x:Name="btnShowImage"
                                                            Margin="2"
                                                            Padding="2"
                                                            Command="{Binding CmdRunOnce}"
                                                            ToolTip="{DynamicResource Lan.Control_WorkEdit.BtnViewImage}">
                                                            <Grid>
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition />
                                                                    <ColumnDefinition />
                                                                </Grid.ColumnDefinitions>
                                                                <TextBlock
                                                                    Margin="2,0"
                                                                    HorizontalAlignment="Right"
                                                                    VerticalAlignment="Center"
                                                                    FontFamily="{StaticResource Font_Ico}"
                                                                    FontSize="16"
                                                                    Text="&#xe669;" />
                                                                <TextBlock
                                                                    Grid.Column="1"
                                                                    HorizontalAlignment="Left"
                                                                    VerticalAlignment="Center"
                                                                    Text="{DynamicResource Lan.Control_WorkEdit.BtnViewImage}" />
                                                            </Grid>
                                                        </ToggleButton>
                                                    </StackPanel>
                                                    <Popup
                                                        MaxWidth="800"
                                                        MaxHeight="600"
                                                        AllowsTransparency="False"
                                                        IsOpen="{Binding ElementName=btnShowImage, Path=IsChecked}"
                                                        Placement="Bottom"
                                                        PlacementTarget="{Binding ElementName=btnShowImage}"
                                                        PopupAnimation="Slide"
                                                        StaysOpen="False">
                                                        <Grid>
                                                            <Border
                                                                Background="White"
                                                                BorderBrush="LightGray"
                                                                BorderThickness="2" />
                                                            <Image
                                                                Margin="5"
                                                                Source="{Binding OutputImage}"
                                                                Stretch="Uniform" />
                                                        </Grid>
                                                    </Popup>
                                                </Grid>
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>
                                    <DataGridTemplateColumn
                                        Width="*"
                                        Header="{DynamicResource Lan.Control_WorkEdit.TextLightControl}"
                                        IsReadOnly="True">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <StackPanel Margin="2" Orientation="Vertical">
                                                    <Grid Height="25" Margin="2">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="0.5*" />
                                                            <ColumnDefinition />
                                                        </Grid.ColumnDefinitions>
                                                        <TextBlock VerticalAlignment="Center" Text="{DynamicResource Lan.Control_WorkEdit.TextEnable}" />
                                                        <CheckBox
                                                            Grid.Column="1"
                                                            VerticalAlignment="Center"
                                                            VerticalContentAlignment="Center"
                                                            Foreground="White"
                                                            IsChecked="{Binding WorkImageSource.ImageSourceInfo.IsLightControlEnbale, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                    </Grid>
                                                    <Grid
                                                        Height="25"
                                                        Margin="2"
                                                        ToolTip="IP:Port">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="0.5*" />
                                                            <ColumnDefinition />
                                                        </Grid.ColumnDefinitions>
                                                        <TextBlock VerticalAlignment="Center" Text="{DynamicResource Lan.Control_WorkEdit.TextController}" />
                                                        <TextBox
                                                            Grid.Column="1"
                                                            VerticalContentAlignment="Center"
                                                            Text="{Binding WorkImageSource.ImageSourceInfo.ControllerIPPort, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                    </Grid>
                                                    <Grid Height="25" Margin="2">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="0.5*" />
                                                            <ColumnDefinition />
                                                        </Grid.ColumnDefinitions>
                                                        <TextBlock VerticalAlignment="Center" Text="{DynamicResource Lan.Control_WorkEdit.TextLightOnCmd}" />
                                                        <TextBox
                                                            Grid.Column="1"
                                                            VerticalContentAlignment="Center"
                                                            Text="{Binding WorkImageSource.ImageSourceInfo.LightOnCommand, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                    </Grid>
                                                    <Grid Height="25" Margin="2">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="0.5*" />
                                                            <ColumnDefinition />
                                                        </Grid.ColumnDefinitions>
                                                        <TextBlock VerticalAlignment="Center" Text="{DynamicResource Lan.Control_WorkEdit.TextLightOffCmd}" />
                                                        <TextBox
                                                            Grid.Column="1"
                                                            VerticalContentAlignment="Center"
                                                            Text="{Binding WorkImageSource.ImageSourceInfo.LightOffCommand, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                    </Grid>
                                                    <Grid Height="25" Margin="2">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="0.5*" />
                                                            <ColumnDefinition />
                                                        </Grid.ColumnDefinitions>
                                                        <TextBlock VerticalAlignment="Center" Text="{DynamicResource Lan.Control_WorkEdit.TextLightProtocol}" />
                                                        <ComboBox
                                                            Grid.Column="1"
                                                            VerticalContentAlignment="Center"
                                                            SelectedIndex="{Binding WorkImageSource.ImageSourceInfo.LightEthernetType, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                                            <ComboBox.Items>
                                                                <ComboBoxItem Content="UDP" />
                                                                <ComboBoxItem Content="TCP" />
                                                            </ComboBox.Items>
                                                        </ComboBox>
                                                    </Grid>
                                                    <Grid Height="25" Margin="2">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="0.5*" />
                                                            <ColumnDefinition />
                                                        </Grid.ColumnDefinitions>
                                                        <TextBlock VerticalAlignment="Center" Text="{DynamicResource Lan.Control_WorkEdit.TextHex}" />
                                                        <CheckBox
                                                            Grid.Column="1"
                                                            VerticalAlignment="Center"
                                                            VerticalContentAlignment="Center"
                                                            Foreground="White"
                                                            IsChecked="{Binding WorkImageSource.ImageSourceInfo.IsHex, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                    </Grid>
                                                </StackPanel>
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>
                                </DataGrid.Columns>
                            </DataGrid>
                        </Grid>
                    </Expander>

                    <!--  深度学习模型  -->
                    <Expander Header="{DynamicResource Lan.Control_WorkEdit.HeaderDLModel}" IsEnabled="{Binding IsDLEnable}">
                        <Expander.Style>
                            <Style BasedOn="{StaticResource Style_Expander}" TargetType="Expander">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsDLEnable}" Value="false">
                                        <Setter Property="Height" Value="0" />
                                        <Setter Property="Margin" Value="0" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Expander.Style>
                        <Grid Grid.Column="1" DataContext="{Binding EditDLWorkspaceViewModel}">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="25" />
                                <RowDefinition />
                            </Grid.RowDefinitions>
                            <Border />
                            <StackPanel HorizontalAlignment="Right" Orientation="Horizontal">
                                <Button
                                    Width="20"
                                    Height="20"
                                    Margin="2"
                                    Command="{Binding CmdAddWorkspace}"
                                    Content="&#xe651;"
                                    FontFamily="{StaticResource Font_Ico}"
                                    FontSize="12"
                                    Style="{StaticResource Style_Button_Ico}"
                                    ToolTip="{DynamicResource Lan.Control_WorkEdit.BtnAdd}" />
                                <Button
                                    Width="20"
                                    Height="20"
                                    Margin="5,2"
                                    Command="{Binding CmdRemoveWorkspace}"
                                    CommandParameter="{Binding ElementName=dgDLWorksapces, Path=SelectedValue}"
                                    Content="&#xe67a;"
                                    FontFamily="{StaticResource Font_Ico}"
                                    FontSize="16"
                                    FontWeight="Bold"
                                    Style="{StaticResource Style_Button_Ico}"
                                    ToolTip="{DynamicResource Lan.Control_WorkEdit.BtnRemove}" />
                            </StackPanel>
                            <DataGrid
                                x:Name="dgDLWorksapces"
                                Grid.Row="1"
                                Margin="0.5"
                                ItemsSource="{Binding DLWorkSpaceViewModelList}"
                                Style="{StaticResource Style_DataGrid}">
                                <DataGrid.Columns>
                                    <DataGridTemplateColumn Width="*" Header="{DynamicResource Lan.Control_WorkEdit.TextWorkspace}">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <TextBlock
                                                    Padding="2"
                                                    VerticalAlignment="Center"
                                                    Text="{Binding WorkspaceName}" />
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>
                                    <DataGridTemplateColumn Width="*" Header="{DynamicResource Lan.Control_WorkEdit.TextStreamList}">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <ComboBox
                                                    Margin="3"
                                                    BorderThickness="0"
                                                    ItemsSource="{Binding Streams}"
                                                    SelectedIndex="0" />
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>
                                </DataGrid.Columns>
                            </DataGrid>
                        </Grid>
                    </Expander>

                    <!--  TCP/IP  -->
                    <Expander Header="{DynamicResource Lan.Control_WorkEdit.HeaderTCPIP}" Style="{DynamicResource Style_Expander}">
                        <Grid DataContext="{Binding EditTCPViewModel}">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="25" />
                                <RowDefinition />
                            </Grid.RowDefinitions>
                            <Border />
                            <StackPanel HorizontalAlignment="Right" Orientation="Horizontal">
                                <Button
                                    Width="20"
                                    Height="20"
                                    Margin="2"
                                    Command="{Binding CmdAddTCPDevice}"
                                    Content="&#xe651;"
                                    FontFamily="{StaticResource Font_Ico}"
                                    FontSize="12"
                                    Style="{StaticResource Style_Button_Ico}"
                                    ToolTip="{DynamicResource Lan.Control_WorkEdit.BtnAdd}" />
                                <Button
                                    Width="20"
                                    Height="20"
                                    Margin="5,2"
                                    Command="{Binding CmdRemoveTCPDevice}"
                                    CommandParameter="{Binding ElementName=dgTCPDevice, Path=SelectedValue}"
                                    Content="&#xe67a;"
                                    FontFamily="{StaticResource Font_Ico}"
                                    FontSize="16"
                                    FontWeight="Bold"
                                    Style="{StaticResource Style_Button_Ico}"
                                    ToolTip="{DynamicResource Lan.Control_WorkEdit.BtnRemove}" />
                            </StackPanel>
                            <DataGrid
                                x:Name="dgTCPDevice"
                                Grid.Row="1"
                                Margin="0.5"
                                ItemsSource="{Binding WorkTCPItemList}"
                                Style="{StaticResource Style_DataGrid}">
                                <DataGrid.Columns>
                                    <DataGridTemplateColumn Width="100" Header="{DynamicResource Lan.Control_WorkEdit.TextName}">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <Grid>
                                                    <TextBlock
                                                        Padding="2"
                                                        VerticalAlignment="Center"
                                                        Text="{Binding TCPDevice.TCPDeviceInfo.TCPDeviceName}" />
                                                </Grid>
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>
                                    <DataGridTemplateColumn Width="100" Header="{DynamicResource Lan.Control_WorkEdit.TextMode}">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <Grid>
                                                    <ComboBox
                                                        x:Name="cbTCPType"
                                                        Margin="3"
                                                        VerticalContentAlignment="Center"
                                                        BorderThickness="0"
                                                        ItemsSource="{Binding TCPTypeConstantsBindableList}"
                                                        SelectedValue="{Binding TCPDevice.TCPDeviceInfo.Type, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                </Grid>
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>
                                    <DataGridTemplateColumn
                                        Width="*"
                                        MinWidth="150"
                                        Header="{DynamicResource Lan.Control_WorkEdit.TextAddressPort}">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <Grid>
                                                    <StackPanel Orientation="Horizontal">
                                                        <StackPanel.Style>
                                                            <Style TargetType="StackPanel">
                                                                <Style.Triggers>
                                                                    <DataTrigger Binding="{Binding TCPDevice.TCPDeviceInfo.Type}" Value="TCPServer">
                                                                        <Setter Property="Visibility" Value="Visible" />
                                                                    </DataTrigger>
                                                                    <DataTrigger Binding="{Binding TCPDevice.TCPDeviceInfo.Type}" Value="TCPClient">
                                                                        <Setter Property="Visibility" Value="Hidden" />
                                                                    </DataTrigger>
                                                                    <DataTrigger Binding="{Binding TCPDevice.TCPDeviceInfo.Type, Converter={StaticResource StringIsNullCvt}}" Value="True">
                                                                        <Setter Property="Visibility" Value="Hidden" />
                                                                    </DataTrigger>
                                                                </Style.Triggers>
                                                            </Style>
                                                        </StackPanel.Style>
                                                        <TextBlock
                                                            Margin="2"
                                                            Padding="2"
                                                            VerticalAlignment="Center"
                                                            Text="IP:" />
                                                        <ComboBox
                                                            MinWidth="100"
                                                            VerticalAlignment="Center"
                                                            BorderThickness="0"
                                                            ItemsSource="{Binding LocalIPBindableList}"
                                                            SelectedValue="{Binding TCPDevice.TCPDeviceInfo.IPAddress, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                        <TextBlock
                                                            Margin="2"
                                                            Padding="2"
                                                            VerticalAlignment="Center"
                                                            Text="Port:" />
                                                        <xceed:IntegerUpDown
                                                            MinWidth="50"
                                                            Padding="2"
                                                            VerticalAlignment="Center"
                                                            Maximum="100000"
                                                            Minimum="10"
                                                            ToolTip="10-100000"
                                                            Value="{Binding TCPDevice.TCPDeviceInfo.Port, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                    </StackPanel>
                                                    <StackPanel Orientation="Horizontal">
                                                        <StackPanel.Style>
                                                            <Style TargetType="StackPanel">
                                                                <Style.Triggers>
                                                                    <DataTrigger Binding="{Binding TCPDevice.TCPDeviceInfo.Type}" Value="TCPClient">
                                                                        <Setter Property="Visibility" Value="Visible" />
                                                                    </DataTrigger>
                                                                    <DataTrigger Binding="{Binding TCPDevice.TCPDeviceInfo.Type}" Value="TCPServer">
                                                                        <Setter Property="Visibility" Value="Hidden" />
                                                                    </DataTrigger>
                                                                    <DataTrigger Binding="{Binding TCPDevice.TCPDeviceInfo.Type, Converter={StaticResource StringIsNullCvt}}" Value="True">
                                                                        <Setter Property="Visibility" Value="Hidden" />
                                                                    </DataTrigger>
                                                                </Style.Triggers>
                                                            </Style>
                                                        </StackPanel.Style>
                                                        <TextBlock
                                                            Margin="2"
                                                            Padding="2"
                                                            VerticalAlignment="Center"
                                                            Text="IP:" />
                                                        <TextBox
                                                            MinWidth="100"
                                                            Padding="2"
                                                            VerticalAlignment="Center">
                                                            <TextBox.Text>
                                                                <Binding
                                                                    Mode="TwoWay"
                                                                    Path="TCPDevice.TCPDeviceInfo.IPAddress"
                                                                    UpdateSourceTrigger="PropertyChanged">
                                                                    <Binding.ValidationRules>
                                                                        <valid:IPTextValidation />
                                                                    </Binding.ValidationRules>
                                                                </Binding>
                                                            </TextBox.Text>
                                                        </TextBox>
                                                        <TextBlock
                                                            Margin="2"
                                                            Padding="2"
                                                            VerticalAlignment="Center"
                                                            Text="Port:" />
                                                        <xceed:IntegerUpDown
                                                            MinWidth="50"
                                                            Padding="2"
                                                            VerticalAlignment="Center"
                                                            Maximum="100000"
                                                            Minimum="100"
                                                            ToolTip="100-100000"
                                                            Value="{Binding TCPDevice.TCPDeviceInfo.Port, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                    </StackPanel>
                                                </Grid>
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>
                                    <DataGridTemplateColumn Width="150" Header="{DynamicResource Lan.Control_WorkEdit.TextOperator}">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <Grid>
                                                    <StackPanel Orientation="Horizontal">
                                                        <Button
                                                            Width="50"
                                                            Margin="2"
                                                            Padding="2"
                                                            Command="{Binding CmdOpenOrCloseTCP}">
                                                            <Button.Style>
                                                                <Style BasedOn="{StaticResource Style_Button_Ico}" TargetType="Button">
                                                                    <Style.Triggers>
                                                                        <DataTrigger Binding="{Binding TCPDevice.IsTCPOpened}" Value="True">
                                                                            <Setter Property="Content" Value="{DynamicResource Lan.Control_WorkEdit.TextClose}" />
                                                                            <Setter Property="Background" Value="#1d953f" />
                                                                            <Setter Property="Foreground" Value="White" />
                                                                        </DataTrigger>
                                                                        <DataTrigger Binding="{Binding TCPDevice.IsTCPOpened}" Value="False">
                                                                            <Setter Property="Content" Value="{DynamicResource Lan.Control_WorkEdit.TextOpen}" />
                                                                        </DataTrigger>
                                                                    </Style.Triggers>
                                                                </Style>
                                                            </Button.Style>
                                                        </Button>
                                                        <StackPanel Orientation="Horizontal">
                                                            <TextBlock VerticalAlignment="Center" Text="{DynamicResource Lan.Control_WorkEdit.TextReceived}" />
                                                            <TextBox
                                                                MinWidth="100"
                                                                Padding="3"
                                                                VerticalAlignment="Center"
                                                                BorderThickness="0,0,0,1"
                                                                IsReadOnly="True"
                                                                Text="{Binding TCPDevice.TCPMsg}" />
                                                        </StackPanel>
                                                    </StackPanel>
                                                </Grid>
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>
                                </DataGrid.Columns>
                            </DataGrid>
                        </Grid>
                    </Expander>

                    <!--  通讯板卡  -->
                    <Expander
                        DataContext="{Binding EditCommCardViewModel}"
                        Header="{DynamicResource Lan.Control_WorkEdit.HeaderCommCard}"
                        Style="{DynamicResource Style_Expander}">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="40" />
                                <RowDefinition />
                            </Grid.RowDefinitions>
                            <Grid>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock
                                        Padding="3"
                                        VerticalAlignment="Center"
                                        Text="{DynamicResource Lan.Control_WorkEdit.TextFFP}" />
                                    <TextBlock
                                        Padding="2"
                                        VerticalAlignment="Center"
                                        Text="{Binding FfpType}" />
                                    <TextBlock
                                        Padding="3"
                                        VerticalAlignment="Center"
                                        Text="{DynamicResource Lan.Control_WorkEdit.TextScript}" />
                                    <Button
                                        Margin="5,6"
                                        Padding="2"
                                        Command="{Binding CmdEditFfpScript}"
                                        Style="{StaticResource Style_Button_Ico}">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition />
                                                <ColumnDefinition />
                                            </Grid.ColumnDefinitions>
                                            <TextBlock
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                FontFamily="{StaticResource Font_Ico}"
                                                FontSize="16"
                                                Text="&#xe6b4;" />
                                            <TextBlock
                                                Grid.Column="1"
                                                Margin="2,0"
                                                HorizontalAlignment="Left"
                                                VerticalAlignment="Center"
                                                Text="{DynamicResource Lan.Control_WorkEdit.BtnEditScript}" />
                                        </Grid>
                                    </Button>
                                    <Button
                                        Margin="5,6"
                                        Padding="5"
                                        Command="{Binding CmdResetScriptFile}"
                                        Content="&#xe6a6;"
                                        FontFamily="{StaticResource Font_Ico}"
                                        FontSize="16"
                                        ToolTip="{DynamicResource Lan.Control_WorkEdit.BtnResetScript}" />
                                </StackPanel>
                                <Button
                                    Margin="5,6"
                                    Padding="3"
                                    HorizontalAlignment="Right"
                                    Command="{Binding CmdTestCC24}"
                                    Content="{DynamicResource Lan.Control_WorkEdit.BtnCommTest}"
                                    IsEnabled="{Binding IsThirdCard, Converter={StaticResource BoolInverseCvt}}" />
                            </Grid>
                            <Grid Grid.Row="1" IsEnabled="{Binding IsThirdCard, Converter={StaticResource BoolInverseCvt}}">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition />
                                    <ColumnDefinition />
                                </Grid.ColumnDefinitions>
                                <Grid Margin="2">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="25" />
                                        <RowDefinition />
                                    </Grid.RowDefinitions>
                                    <TextBlock
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        Text="{DynamicResource Lan.Control_WorkEdit.TextInput}" />
                                    <DataGrid
                                        x:Name="dgIOInput"
                                        Grid.Row="1"
                                        Margin="0.5"
                                        BorderBrush="Gray"
                                        CanUserAddRows="False"
                                        ItemsSource="{Binding InputItems}"
                                        Style="{StaticResource Style_DataGrid}">
                                        <DataGrid.Columns>
                                            <DataGridTemplateColumn Width="50" Header="{DynamicResource Lan.Control_WorkEdit.TextLineNum}">
                                                <DataGridTemplateColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <Grid>
                                                            <TextBlock
                                                                Padding="2"
                                                                VerticalAlignment="Center"
                                                                Text="{Binding LineNumber}" />
                                                        </Grid>
                                                    </DataTemplate>
                                                </DataGridTemplateColumn.CellTemplate>
                                            </DataGridTemplateColumn>
                                            <DataGridTemplateColumn Width="*" Header="{DynamicResource Lan.Control_WorkEdit.TextType}">
                                                <DataGridTemplateColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <Grid>
                                                            <ComboBox
                                                                Width="100"
                                                                Margin="3"
                                                                HorizontalAlignment="Left"
                                                                VerticalContentAlignment="Center"
                                                                BorderThickness="0"
                                                                ItemsSource="{Binding RelativeSource={RelativeSource AncestorType=Expander}, Path=DataContext.InputSignalTypeConstantsBindableList}"
                                                                SelectedItem="{Binding SignalType, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                        </Grid>
                                                    </DataTemplate>
                                                </DataGridTemplateColumn.CellTemplate>
                                            </DataGridTemplateColumn>
                                        </DataGrid.Columns>
                                    </DataGrid>
                                </Grid>
                                <Grid Grid.Column="1" Margin="2">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="25" />
                                        <RowDefinition />
                                    </Grid.RowDefinitions>
                                    <Border />
                                    <TextBlock
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        Text="{DynamicResource Lan.Control_WorkEdit.TextOutput}" />
                                    <DataGrid
                                        x:Name="dgIOOutput"
                                        Grid.Row="1"
                                        Margin="0.5"
                                        BorderBrush="Gray"
                                        ItemsSource="{Binding OutputItems}"
                                        Style="{StaticResource Style_DataGrid}">
                                        <DataGrid.Columns>
                                            <DataGridTemplateColumn Width="50" Header="{DynamicResource Lan.Control_WorkEdit.TextLineNum}">
                                                <DataGridTemplateColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <Grid>
                                                            <TextBlock
                                                                Padding="2"
                                                                VerticalAlignment="Center"
                                                                Text="{Binding LineNumber}" />
                                                        </Grid>
                                                    </DataTemplate>
                                                </DataGridTemplateColumn.CellTemplate>
                                            </DataGridTemplateColumn>
                                            <DataGridTemplateColumn Width="100" Header="{DynamicResource Lan.Control_WorkEdit.TextType}">
                                                <DataGridTemplateColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <ComboBox
                                                            Margin="3"
                                                            VerticalContentAlignment="Center"
                                                            BorderThickness="0"
                                                            ItemsSource="{Binding RelativeSource={RelativeSource AncestorType=Expander}, Path=DataContext.OutputSignalTypeConstantsBindableList}"
                                                            SelectedItem="{Binding SignalType, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                    </DataTemplate>
                                                </DataGridTemplateColumn.CellTemplate>
                                            </DataGridTemplateColumn>
                                            <DataGridTemplateColumn Width="*" Header="{DynamicResource Lan.Control_WorkEdit.TextPulseWidth}">
                                                <DataGridTemplateColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <Grid>
                                                            <xceed:IntegerUpDown
                                                                x:Name="cbOutputDuration"
                                                                MinWidth="80"
                                                                Margin="3,3,25,3"
                                                                HorizontalAlignment="Stretch"
                                                                VerticalContentAlignment="Center"
                                                                BorderThickness="1"
                                                                Value="{Binding Duration, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                            <TextBlock
                                                                Margin="3,0"
                                                                HorizontalAlignment="Right"
                                                                VerticalAlignment="Center"
                                                                Text="ms" />
                                                        </Grid>
                                                    </DataTemplate>
                                                </DataGridTemplateColumn.CellTemplate>
                                            </DataGridTemplateColumn>
                                        </DataGrid.Columns>
                                    </DataGrid>
                                </Grid>
                            </Grid>
                        </Grid>
                    </Expander>

                    <!--  工作流组  -->
                    <Expander Header="{DynamicResource Lan.Control_WorkEdit.HeaderGroup}" Style="{DynamicResource Style_Expander}">
                        <Grid Grid.Column="1" DataContext="{Binding EditGroupViewModel}">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="25" />
                                <RowDefinition />
                            </Grid.RowDefinitions>
                            <Border />
                            <StackPanel HorizontalAlignment="Right" Orientation="Horizontal">
                                <Button
                                    Width="20"
                                    Height="20"
                                    Margin="2"
                                    Command="{Binding CmdAddGroup}"
                                    Content="&#xe651;"
                                    FontFamily="{StaticResource Font_Ico}"
                                    FontSize="12"
                                    Style="{StaticResource Style_Button_Ico}"
                                    ToolTip="{DynamicResource Lan.Control_WorkEdit.BtnAdd}" />
                                <Button
                                    Width="20"
                                    Height="20"
                                    Margin="5,2"
                                    Command="{Binding CmdRemoveGroup}"
                                    CommandParameter="{Binding ElementName=dgGroups, Path=SelectedValue}"
                                    Content="&#xe67a;"
                                    FontFamily="{StaticResource Font_Ico}"
                                    FontSize="16"
                                    FontWeight="Bold"
                                    Style="{StaticResource Style_Button_Ico}"
                                    ToolTip="{DynamicResource Lan.Control_WorkEdit.BtnRemove}" />
                            </StackPanel>
                            <DataGrid
                                x:Name="dgGroups"
                                Grid.Row="1"
                                Margin="0.5"
                                ItemsSource="{Binding WorkGroupItemList}"
                                Style="{StaticResource Style_DataGrid}">
                                <DataGrid.Columns>
                                    <DataGridTemplateColumn Width="100" Header="{DynamicResource Lan.Control_WorkEdit.TextName}">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <TextBlock
                                                    Padding="2"
                                                    VerticalAlignment="Center"
                                                    Text="{Binding WorkGroup.GroupInfo.GroupName}" />
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>
                                    <DataGridTemplateColumn Width="*" Header="{DynamicResource Lan.Control_WorkEdit.TextStreamCollection}">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <ListView
                                                    Background="Transparent"
                                                    BorderThickness="0"
                                                    ItemsSource="{Binding WorkGroup.GroupInfo.StreamsList}">
                                                    <ListView.ItemsPanel>
                                                        <ItemsPanelTemplate>
                                                            <WrapPanel
                                                                HorizontalAlignment="Left"
                                                                VerticalAlignment="Center"
                                                                Orientation="Horizontal" />
                                                        </ItemsPanelTemplate>
                                                    </ListView.ItemsPanel>
                                                    <ListView.ItemContainerStyle>
                                                        <Style TargetType="ListViewItem">
                                                            <Setter Property="Template">
                                                                <Setter.Value>
                                                                    <ControlTemplate>
                                                                        <Grid Margin="3,0">
                                                                            <StackPanel Orientation="Horizontal">
                                                                                <TextBlock
                                                                                    FontFamily="{StaticResource Font_Ico}"
                                                                                    Foreground="LightGray"
                                                                                    Text="&#xe640;" />
                                                                                <Grid Background="LightGray">
                                                                                    <Border BorderBrush="Black" BorderThickness="1" />
                                                                                    <TextBlock
                                                                                        Padding="3"
                                                                                        HorizontalAlignment="Center"
                                                                                        VerticalAlignment="Center"
                                                                                        FontSize="10"
                                                                                        Text="{Binding RelativeSource={RelativeSource AncestorType=ListViewItem}, Path=Content}" />
                                                                                </Grid>
                                                                            </StackPanel>
                                                                        </Grid>
                                                                    </ControlTemplate>
                                                                </Setter.Value>
                                                            </Setter>
                                                        </Style>
                                                    </ListView.ItemContainerStyle>
                                                </ListView>
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>
                                    <DataGridTemplateColumn Width="*" Header="{DynamicResource Lan.Control_WorkEdit.TextSetup}">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <Grid>
                                                    <StackPanel Margin="2" Orientation="Vertical">
                                                        <Grid Height="25" Margin="2">
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="0.5*" />
                                                                <ColumnDefinition />
                                                            </Grid.ColumnDefinitions>
                                                            <TextBlock VerticalAlignment="Center" Text="{DynamicResource Lan.Control_WorkEdit.TextAlgorithmTB}" />
                                                            <Button
                                                                Grid.Column="1"
                                                                Command="{Binding CmdEditGroupToolBlock}"
                                                                CommandParameter="{Binding ElementName=gridEditWorkStream, Path=DataContext}"
                                                                Content="&#xe606;"
                                                                FontFamily="{StaticResource Font_Ico}"
                                                                Style="{StaticResource Style_Button_Ico}" />
                                                        </Grid>
                                                        <Grid Height="25" Margin="2">
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="0.5*" />
                                                                <ColumnDefinition />
                                                            </Grid.ColumnDefinitions>
                                                            <TextBlock VerticalAlignment="Center" Text="{DynamicResource Lan.Control_WorkEdit.TextResultGraphic}" />
                                                            <Grid Grid.Column="1" Margin="1">
                                                                <ComboBox
                                                                    VerticalContentAlignment="Center"
                                                                    BorderThickness="0"
                                                                    ItemsSource="{Binding ResultGraphicConstantsBindableList}"
                                                                    SelectedIndex="0"
                                                                    SelectedValue="{Binding WorkGroup.GroupInfo.ResultGraphicOption, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                            </Grid>
                                                        </Grid>
                                                        <Grid Height="25" Margin="2">
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="0.5*" />
                                                                <ColumnDefinition />
                                                            </Grid.ColumnDefinitions>
                                                            <TextBlock VerticalAlignment="Center" Text="{DynamicResource Lan.Control_WorkEdit.TextDisplayOption}" />
                                                            <Grid Grid.Column="1" Margin="1">
                                                                <ComboBox
                                                                    Margin="0,0,35,0"
                                                                    VerticalContentAlignment="Center"
                                                                    BorderThickness="0"
                                                                    ItemsSource="{Binding WorkGroup.ToolBlockRecordsKeyList}"
                                                                    SelectedValue="{Binding WorkGroup.GroupInfo.ToolBlockRecordKey, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                                                    <ComboBox.Style>
                                                                        <Style TargetType="ComboBox">
                                                                            <Style.Triggers>
                                                                                <DataTrigger Binding="{Binding ElementName=btnResetGroupTBRecordKey, Path=IsPressed}" Value="True">
                                                                                    <Setter Property="SelectedIndex" Value="-1" />
                                                                                </DataTrigger>
                                                                            </Style.Triggers>
                                                                        </Style>
                                                                    </ComboBox.Style>
                                                                </ComboBox>
                                                                <Button
                                                                    x:Name="btnResetGroupTBRecordKey"
                                                                    Width="30"
                                                                    HorizontalAlignment="Right"
                                                                    Content="&#xe6a6;"
                                                                    FontFamily="{StaticResource Font_Ico}"
                                                                    FontSize="16"
                                                                    Style="{StaticResource Style_Button_Ico}" />
                                                            </Grid>
                                                        </Grid>
                                                        <Grid Height="25" Margin="2">
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="0.5*" />
                                                                <ColumnDefinition />
                                                            </Grid.ColumnDefinitions>
                                                            <TextBlock VerticalAlignment="Center" Text="{DynamicResource Lan.Control_WorkEdit.TextChartSeries}" />
                                                            <xceed:IntegerUpDown
                                                                Grid.Column="1"
                                                                Margin="1,0"
                                                                DefaultValue="0"
                                                                Maximum="10"
                                                                Minimum="0"
                                                                Value="{Binding WorkGroup.GroupInfo.ResultChartSeriesCount, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                        </Grid>
                                                        <Grid Height="25" Margin="2">
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="0.5*" />
                                                                <ColumnDefinition />
                                                            </Grid.ColumnDefinitions>
                                                            <TextBlock VerticalAlignment="Center" Text="{DynamicResource Lan.Control_WorkEdit.TextResultSend}" />
                                                            <StackPanel
                                                                Grid.Column="1"
                                                                Margin="1"
                                                                Orientation="Horizontal">
                                                                <ComboBox
                                                                    Width="50"
                                                                    VerticalContentAlignment="Center"
                                                                    BorderThickness="0"
                                                                    ItemsSource="{Binding ResultSendTypeConstantsBindableList}"
                                                                    SelectedValue="{Binding WorkGroup.GroupInfo.ResultSenderType, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                                                    <ComboBox.Style>
                                                                        <Style TargetType="ComboBox">
                                                                            <Style.Triggers>
                                                                                <DataTrigger Binding="{Binding ElementName=btnReset, Path=IsPressed}" Value="True">
                                                                                    <Setter Property="SelectedIndex" Value="-1" />
                                                                                </DataTrigger>
                                                                            </Style.Triggers>
                                                                        </Style>
                                                                    </ComboBox.Style>
                                                                </ComboBox>
                                                                <Button
                                                                    x:Name="btnReset"
                                                                    Width="30"
                                                                    Margin="5,0"
                                                                    Content="&#xe6a6;"
                                                                    FontFamily="{StaticResource Font_Ico}"
                                                                    FontSize="16"
                                                                    Style="{StaticResource Style_Button_Ico}" />
                                                                <ToggleButton
                                                                    x:Name="btn_GroupResultSendDetail"
                                                                    Margin="5,0"
                                                                    Padding="2"
                                                                    BorderBrush="Transparent"
                                                                    Content="{DynamicResource Lan.Control_WorkEdit.BtnDetail}" />
                                                            </StackPanel>
                                                        </Grid>
                                                        <Grid Height="25" Margin="2">
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="0.5*" />
                                                                <ColumnDefinition />
                                                            </Grid.ColumnDefinitions>
                                                            <TextBlock VerticalAlignment="Center" Text="{DynamicResource Lan.Control_WorkEdit.TextVisibleInRuntime}" />
                                                            <CheckBox
                                                                Grid.Column="1"
                                                                VerticalAlignment="Center"
                                                                IsChecked="{Binding WorkGroup.GroupInfo.IsVisibleInRuntime, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                        </Grid>
                                                    </StackPanel>
                                                    <Popup
                                                        Width="200"
                                                        Height="80"
                                                        AllowsTransparency="False"
                                                        IsOpen="{Binding ElementName=btn_GroupResultSendDetail, Path=IsChecked}"
                                                        Placement="Bottom"
                                                        PlacementTarget="{Binding ElementName=btn_GroupResultSendDetail}"
                                                        PopupAnimation="Slide"
                                                        StaysOpen="False">
                                                        <Grid>
                                                            <Border
                                                                Background="White"
                                                                BorderBrush="Black"
                                                                BorderThickness="1" />
                                                            <Grid Margin="1">
                                                                <StackPanel
                                                                    HorizontalAlignment="Center"
                                                                    VerticalAlignment="Center"
                                                                    Orientation="Vertical">
                                                                    <StackPanel Margin="0,10" Orientation="Horizontal">
                                                                        <TextBlock
                                                                            Margin="2"
                                                                            Padding="2"
                                                                            VerticalAlignment="Center"
                                                                            Foreground="Black"
                                                                            Text="{DynamicResource Lan.Control_WorkEdit.TextTCPSend}" />
                                                                        <ComboBox
                                                                            MinWidth="100"
                                                                            BorderThickness="0"
                                                                            DisplayMemberPath="TCPDevice.TCPDeviceInfo.TCPDeviceName"
                                                                            ItemsSource="{Binding ElementName=dgTCPDevice, Path=ItemsSource}"
                                                                            SelectedValue="{Binding WorkGroup.GroupInfo.TCPSenderName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                                            SelectedValuePath="TCPDevice.TCPDeviceInfo.TCPDeviceName">
                                                                            <ComboBox.Style>
                                                                                <Style TargetType="ComboBox">
                                                                                    <Style.Triggers>
                                                                                        <DataTrigger Binding="{Binding WorkGroup.GroupInfo.ResultSenderType}" Value="IO">
                                                                                            <Setter Property="IsEnabled" Value="False" />
                                                                                        </DataTrigger>
                                                                                    </Style.Triggers>
                                                                                </Style>
                                                                            </ComboBox.Style>
                                                                        </ComboBox>
                                                                    </StackPanel>
                                                                    <StackPanel Orientation="Horizontal">
                                                                        <TextBlock
                                                                            Margin="2"
                                                                            Padding="2"
                                                                            VerticalAlignment="Center"
                                                                            Foreground="Black"
                                                                            Text="{DynamicResource Lan.Control_WorkEdit.TextLineNum}" />
                                                                        <ComboBox
                                                                            MinWidth="100"
                                                                            BorderThickness="0"
                                                                            ItemsSource="{Binding IOOutputConstantsBindableList}"
                                                                            SelectedIndex="0">
                                                                            <ComboBox.Style>
                                                                                <Style TargetType="ComboBox">
                                                                                    <Style.Triggers>
                                                                                        <DataTrigger Binding="{Binding WorkGroup.GroupInfo.ResultSenderType}" Value="TCP">
                                                                                            <Setter Property="IsEnabled" Value="False" />
                                                                                        </DataTrigger>
                                                                                    </Style.Triggers>
                                                                                </Style>
                                                                            </ComboBox.Style>
                                                                        </ComboBox>
                                                                    </StackPanel>
                                                                </StackPanel>
                                                            </Grid>
                                                        </Grid>
                                                    </Popup>
                                                </Grid>
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>
                                    <DataGridTemplateColumn Width="50" Header="{DynamicResource Lan.Control_WorkEdit.TextValidity}">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <TextBlock
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Center"
                                                    FontFamily="{StaticResource Font_Ico}"
                                                    FontSize="16"
                                                    ToolTip="{DynamicResource Lan.Control_WorkEdit.TextValidityTip}">
                                                    <TextBlock.Style>
                                                        <Style TargetType="TextBlock">
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding WorkGroup.GroupInfo.IsValid, Mode=OneWay}" Value="true">
                                                                    <Setter Property="Text" Value="&#xe65b;" />
                                                                    <Setter Property="Foreground" Value="#65c294" />
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding WorkGroup.GroupInfo.IsValid, Mode=OneWay}" Value="false">
                                                                    <Setter Property="Text" Value="&#xe67c;" />
                                                                    <Setter Property="Foreground" Value="#ffd400" />
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </TextBlock.Style>
                                                </TextBlock>
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>
                                </DataGrid.Columns>
                            </DataGrid>
                        </Grid>
                    </Expander>

                    <!--  工作流  -->
                    <Expander Header="{DynamicResource Lan.Control_WorkEdit.HeaderWorkStream}" Style="{DynamicResource Style_Expander}">
                        <Grid x:Name="gridEditWorkStream" DataContext="{Binding EditStreamsViewModel}">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="30" />
                                <RowDefinition />
                            </Grid.RowDefinitions>
                            <Border />
                            <StackPanel
                                Margin="0,2"
                                HorizontalAlignment="Left"
                                Orientation="Horizontal">
                                <StackPanel.Style>
                                    <Style TargetType="StackPanel">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding ElementName=dgWorkStreams, Path=SelectedIndex}" Value="-1">
                                                <Setter Property="IsEnabled" Value="False" />
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </StackPanel.Style>
                                <Button
                                    Margin="2,0"
                                    Padding="2"
                                    Command="{Binding CmdRunWorkStreamItem}"
                                    CommandParameter="{Binding ElementName=dgWorkStreams, Path=SelectedValue}"
                                    Style="{StaticResource Style_Button_Ico}">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition />
                                            <ColumnDefinition />
                                        </Grid.ColumnDefinitions>
                                        <TextBlock
                                            HorizontalAlignment="Right"
                                            VerticalAlignment="Center"
                                            FontFamily="{StaticResource Font_Ico}"
                                            FontSize="16"
                                            Text="&#xe8c5;" />
                                        <TextBlock
                                            Grid.Column="1"
                                            HorizontalAlignment="Left"
                                            VerticalAlignment="Center"
                                            Text="{DynamicResource Lan.Control_WorkEdit.BtnRunOnce}" />
                                    </Grid>
                                </Button>
                                <ToggleButton x:Name="btn_EditRecipes" Padding="2">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition />
                                            <ColumnDefinition />
                                        </Grid.ColumnDefinitions>
                                        <TextBlock
                                            Margin="2"
                                            HorizontalAlignment="Right"
                                            VerticalAlignment="Center"
                                            FontFamily="{StaticResource Font_Ico}"
                                            FontSize="16"
                                            Text="&#xe674;" />
                                        <TextBlock
                                            Grid.Column="1"
                                            HorizontalAlignment="Left"
                                            VerticalAlignment="Center"
                                            Text="{DynamicResource Lan.Control_WorkEdit.BtnRecipes}" />
                                    </Grid>
                                </ToggleButton>
                                <Button
                                    Margin="2,0"
                                    Padding="2"
                                    Command="{Binding CmdCopyWorkStreamItem}"
                                    CommandParameter="{Binding ElementName=dgWorkStreams, Path=SelectedValue}"
                                    Style="{StaticResource Style_Button_Ico}">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition />
                                            <ColumnDefinition />
                                        </Grid.ColumnDefinitions>
                                        <TextBlock
                                            HorizontalAlignment="Right"
                                            VerticalAlignment="Center"
                                            FontFamily="{StaticResource Font_Ico}"
                                            FontSize="16"
                                            Text="&#xe6d1;" />
                                        <TextBlock
                                            Grid.Column="1"
                                            HorizontalAlignment="Left"
                                            VerticalAlignment="Center"
                                            Text="{DynamicResource Lan.Control_WorkEdit.BtnCopy}" />
                                    </Grid>
                                </Button>
                                <Button
                                    Padding="2"
                                    Command="{Binding CmdWorkStreamItemUp}"
                                    CommandParameter="{Binding ElementName=dgWorkStreams, Path=SelectedValue}"
                                    Style="{StaticResource Style_Button_Ico}">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition />
                                            <ColumnDefinition />
                                        </Grid.ColumnDefinitions>
                                        <TextBlock
                                            HorizontalAlignment="Right"
                                            VerticalAlignment="Center"
                                            FontFamily="{StaticResource Font_Ico}"
                                            FontSize="16"
                                            Text="&#xe6fa;" />
                                        <TextBlock
                                            Grid.Column="1"
                                            HorizontalAlignment="Left"
                                            VerticalAlignment="Center"
                                            Text="{DynamicResource Lan.Control_WorkEdit.BtnUp}" />
                                    </Grid>
                                </Button>
                                <Button
                                    Margin="2,0"
                                    Padding="2"
                                    Command="{Binding CmdWorkStreamItemDown}"
                                    CommandParameter="{Binding ElementName=dgWorkStreams, Path=SelectedValue}"
                                    Style="{StaticResource Style_Button_Ico}">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition />
                                            <ColumnDefinition />
                                        </Grid.ColumnDefinitions>
                                        <TextBlock
                                            HorizontalAlignment="Right"
                                            VerticalAlignment="Center"
                                            FontFamily="{StaticResource Font_Ico}"
                                            FontSize="16"
                                            Text="&#xe686;" />
                                        <TextBlock
                                            Grid.Column="1"
                                            HorizontalAlignment="Left"
                                            VerticalAlignment="Center"
                                            Text="{DynamicResource Lan.Control_WorkEdit.BtnDown}" />
                                    </Grid>
                                </Button>
                            </StackPanel>
                            <StackPanel HorizontalAlignment="Right" Orientation="Horizontal">
                                <Button
                                    Width="20"
                                    Height="20"
                                    Margin="2"
                                    Command="{Binding CmdAddWorkStreamItem}"
                                    Content="&#xe651;"
                                    FontFamily="{StaticResource Font_Ico}"
                                    FontSize="12"
                                    Style="{StaticResource Style_Button_Ico}"
                                    ToolTip="{DynamicResource Lan.Control_WorkEdit.BtnAdd}" />
                                <Button
                                    Width="20"
                                    Height="20"
                                    Margin="5,2"
                                    Command="{Binding CmdRemoveWorkStreamItem}"
                                    CommandParameter="{Binding ElementName=dgWorkStreams, Path=SelectedValue}"
                                    Content="&#xe67a;"
                                    FontFamily="{StaticResource Font_Ico}"
                                    FontSize="16"
                                    FontWeight="Bold"
                                    Style="{StaticResource Style_Button_Ico}"
                                    ToolTip="{DynamicResource Lan.Control_WorkEdit.BtnRemove}" />
                            </StackPanel>
                            <ListView
                                x:Name="dgWorkStreams"
                                Grid.Row="1"
                                Background="{StaticResource Color_DarkBackground}"
                                BorderBrush="Gray"
                                BorderThickness="0"
                                ItemsSource="{Binding WorkStreamItemViewModelList}"
                                SelectedIndex="{Binding SelectedWorkStreamIndex, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                <ListView.ItemContainerStyle>
                                    <Style TargetType="ListViewItem">
                                        <Style.Triggers>
                                            <Trigger Property="IsSelected" Value="True">
                                                <Setter Property="Background" Value="{StaticResource Color_Selected}" />
                                            </Trigger>
                                        </Style.Triggers>
                                        <Setter Property="BorderThickness" Value="0" />
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="ListViewItem">
                                                    <Grid Background="{TemplateBinding Background}">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="30" />
                                                            <ColumnDefinition />
                                                        </Grid.ColumnDefinitions>
                                                        <Border>
                                                            <StackPanel Orientation="Horizontal">
                                                                <TextBlock
                                                                    Padding="3"
                                                                    HorizontalAlignment="Center"
                                                                    VerticalAlignment="Center"
                                                                    FontFamily="{StaticResource Font_Ico}"
                                                                    FontSize="16"
                                                                    Foreground="White"
                                                                    Text="&#xe699;"
                                                                    Visibility="{Binding RelativeSource={RelativeSource AncestorType=ListViewItem}, Path=IsSelected, Converter={StaticResource BoolToVisiblityDefaultVisibleCvt}}" />
                                                            </StackPanel>
                                                        </Border>
                                                        <Expander
                                                            Grid.Column="1"
                                                            Margin="2,1"
                                                            BorderBrush="Gray"
                                                            BorderThickness="2"
                                                            FontFamily="Microsoft YaHei"
                                                            Header="{Binding WorkStream.ResultViewModel.StreamOrGroupName}"
                                                            Style="{StaticResource Style_Expander}">
                                                            <Grid Margin="15,0,0,0">
                                                                <StackPanel Orientation="Vertical">
                                                                    <Grid
                                                                        Height="30"
                                                                        Margin="0,2"
                                                                        Background="{StaticResource Color_DarkBackground}">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="0.3*" />
                                                                            <ColumnDefinition />
                                                                        </Grid.ColumnDefinitions>
                                                                        <TextBlock
                                                                            Margin="10,0"
                                                                            HorizontalAlignment="Left"
                                                                            VerticalAlignment="Center"
                                                                            Text="{DynamicResource Lan.Control_WorkEdit.TextInternalTrigger}" />
                                                                        <StackPanel
                                                                            Grid.Column="1"
                                                                            HorizontalAlignment="Left"
                                                                            Orientation="Horizontal">
                                                                            <CheckBox
                                                                                VerticalAlignment="Center"
                                                                                VerticalContentAlignment="Center"
                                                                                Content="{DynamicResource Lan.Control_WorkEdit.TextEnable}"
                                                                                Foreground="White"
                                                                                IsChecked="{Binding WorkStream.WorkStreamInfo.IsEnableInternalTrigger, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                                            <CheckBox
                                                                                Margin="10,0"
                                                                                VerticalAlignment="Center"
                                                                                VerticalContentAlignment="Center"
                                                                                Content="{DynamicResource Lan.Control_WorkEdit.TextAutoStart}"
                                                                                Foreground="White"
                                                                                IsChecked="{Binding WorkStream.WorkStreamInfo.IsInternalTriggerBegin, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                                        </StackPanel>
                                                                    </Grid>
                                                                    <Grid
                                                                        Height="30"
                                                                        Margin="0,2"
                                                                        Background="{StaticResource Color_DarkBackground}">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="0.3*" />
                                                                            <ColumnDefinition />
                                                                        </Grid.ColumnDefinitions>
                                                                        <TextBlock
                                                                            Margin="10,0"
                                                                            HorizontalAlignment="Left"
                                                                            VerticalAlignment="Center"
                                                                            Text="{DynamicResource Lan.Control_WorkEdit.TextAsyncMode}" />
                                                                        <StackPanel Grid.Column="1" Orientation="Horizontal">
                                                                            <CheckBox
                                                                                x:Name="cbAsync"
                                                                                HorizontalAlignment="Left"
                                                                                VerticalAlignment="Center"
                                                                                IsChecked="{Binding WorkStream.WorkStreamInfo.IsAsyncMode, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                                            <CheckBox
                                                                                Margin="10,0"
                                                                                HorizontalAlignment="Left"
                                                                                VerticalAlignment="Center"
                                                                                Content="{DynamicResource Lan.Control_WorkEdit.TextMultiThread}"
                                                                                Foreground="White"
                                                                                IsChecked="{Binding WorkStream.WorkStreamInfo.IsEnableMultiThread, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                                                Visibility="{Binding RelativeSource={RelativeSource AncestorType=local:Control_WorkEdit}, Path=DataContext.IsDLEnable, Converter={StaticResource BoolToVisiblityDefaultHiddenCvt}}" />
                                                                            <xceed:IntegerUpDown
                                                                                MinWidth="50"
                                                                                Margin="5,2"
                                                                                BorderBrush="Black"
                                                                                BorderThickness="0"
                                                                                DefaultValue="2"
                                                                                Maximum="10"
                                                                                Minimum="2"
                                                                                Visibility="{Binding RelativeSource={RelativeSource AncestorType=local:Control_WorkEdit}, Path=DataContext.IsDLEnable, Converter={StaticResource BoolToVisiblityDefaultHiddenCvt}}"
                                                                                Value="{Binding WorkStream.WorkStreamInfo.ThreadCount, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                                        </StackPanel>
                                                                    </Grid>
                                                                    <Grid
                                                                        Height="30"
                                                                        Margin="0,2"
                                                                        Background="{StaticResource Color_DarkBackground}">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="0.3*" />
                                                                            <ColumnDefinition />
                                                                        </Grid.ColumnDefinitions>
                                                                        <TextBlock
                                                                            Margin="10,0"
                                                                            HorizontalAlignment="Left"
                                                                            VerticalAlignment="Center"
                                                                            Text="{DynamicResource Lan.Control_WorkEdit.HeaderGroup}" />
                                                                        <Border Grid.Column="1" Margin="0,2,5,2">
                                                                            <Grid Margin="0.5">
                                                                                <ComboBox
                                                                                    Margin="0,0,50,0"
                                                                                    VerticalContentAlignment="Center"
                                                                                    BorderThickness="0"
                                                                                    DisplayMemberPath="WorkGroup.GroupInfo.GroupName"
                                                                                    ItemsSource="{Binding ElementName=dgGroups, Path=ItemsSource}"
                                                                                    SelectedValue="{Binding WorkStream.WorkStreamInfo.GroupName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                                                    SelectedValuePath="WorkGroup.GroupInfo.GroupName">
                                                                                    <ComboBox.Style>
                                                                                        <Style TargetType="ComboBox">
                                                                                            <Style.Triggers>
                                                                                                <DataTrigger Binding="{Binding ElementName=btnResetGroup, Path=IsPressed}" Value="True">
                                                                                                    <Setter Property="SelectedIndex" Value="-1" />
                                                                                                </DataTrigger>
                                                                                            </Style.Triggers>
                                                                                        </Style>
                                                                                    </ComboBox.Style>
                                                                                    <i:Interaction.Triggers>
                                                                                        <i:EventTrigger EventName="SelectionChanged">
                                                                                            <i:InvokeCommandAction Command="{Binding CmdSelectGroup}" />
                                                                                        </i:EventTrigger>
                                                                                    </i:Interaction.Triggers>
                                                                                </ComboBox>
                                                                                <Button
                                                                                    x:Name="btnResetGroup"
                                                                                    Width="30"
                                                                                    HorizontalAlignment="Right"
                                                                                    Content="&#xe6a6;"
                                                                                    FontFamily="{StaticResource Font_Ico}"
                                                                                    FontSize="16"
                                                                                    Style="{StaticResource Style_Button_Ico}" />
                                                                            </Grid>
                                                                        </Border>
                                                                    </Grid>
                                                                    <Grid Background="{StaticResource Color_DarkBackground}" Style="{DynamicResource Grid_HiddenInVproMode}">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="0.3*" />
                                                                            <ColumnDefinition />
                                                                        </Grid.ColumnDefinitions>
                                                                        <TextBlock
                                                                            Margin="10,0"
                                                                            HorizontalAlignment="Left"
                                                                            VerticalAlignment="Center"
                                                                            Text="{DynamicResource Lan.Control_WorkEdit.TextOnlyVPro}" />
                                                                        <CheckBox
                                                                            x:Name="chb_OnlyVpro"
                                                                            Grid.Column="1"
                                                                            VerticalAlignment="Center"
                                                                            IsChecked="{Binding WorkStream.WorkStreamInfo.IsOnlyVpro, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                                    </Grid>
                                                                    <Grid
                                                                        Height="30"
                                                                        Margin="0,2"
                                                                        Background="{StaticResource Color_DarkBackground}">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="0.3*" />
                                                                            <ColumnDefinition />
                                                                        </Grid.ColumnDefinitions>
                                                                        <TextBlock
                                                                            Margin="10,0"
                                                                            HorizontalAlignment="Left"
                                                                            VerticalAlignment="Center"
                                                                            Text="{DynamicResource Lan.Control_WorkEdit.HeaderImageSource}" />
                                                                        <Border Grid.Column="1" Margin="0,2,5,2">
                                                                            <Grid Margin="0.5">
                                                                                <ComboBox
                                                                                    x:Name="cbImageSource"
                                                                                    Margin="0,0,50,0"
                                                                                    VerticalContentAlignment="Center"
                                                                                    BorderThickness="0"
                                                                                    DisplayMemberPath="WorkImageSource.ImageSourceInfo.ImageSourceName"
                                                                                    ItemsSource="{Binding ElementName=dgImageSources, Path=ItemsSource}"
                                                                                    SelectedValue="{Binding WorkStream.WorkStreamInfo.ImageSourceName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                                                    SelectedValuePath="WorkImageSource.ImageSourceInfo.ImageSourceName">
                                                                                    <ComboBox.Style>
                                                                                        <Style TargetType="ComboBox">
                                                                                            <Style.Triggers>
                                                                                                <DataTrigger Binding="{Binding ElementName=btnResetImageSource, Path=IsPressed}" Value="True">
                                                                                                    <Setter Property="SelectedIndex" Value="-1" />
                                                                                                </DataTrigger>
                                                                                            </Style.Triggers>
                                                                                        </Style>
                                                                                    </ComboBox.Style>
                                                                                </ComboBox>
                                                                                <Button
                                                                                    x:Name="btnResetImageSource"
                                                                                    Width="30"
                                                                                    HorizontalAlignment="Right"
                                                                                    Content="&#xe6a6;"
                                                                                    FontFamily="{StaticResource Font_Ico}"
                                                                                    FontSize="16"
                                                                                    Style="{StaticResource Style_Button_Ico}" />
                                                                            </Grid>
                                                                        </Border>
                                                                    </Grid>
                                                                    <Grid
                                                                        Background="{StaticResource Color_DarkBackground}"
                                                                        IsEnabled="{Binding ElementName=chb_OnlyVpro, Path=IsChecked, Converter={StaticResource BoolInverseCvt}}"
                                                                        Style="{DynamicResource Grid_HiddenInVproMode}">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="0.3*" />
                                                                            <ColumnDefinition />
                                                                        </Grid.ColumnDefinitions>
                                                                        <TextBlock
                                                                            Margin="10,0"
                                                                            HorizontalAlignment="Left"
                                                                            VerticalAlignment="Center"
                                                                            Text="{DynamicResource Lan.Control_WorkEdit.TextInputTB}" />
                                                                        <Border Grid.Column="1" Margin="0,2,5,2">
                                                                            <Button
                                                                                Grid.Column="1"
                                                                                HorizontalAlignment="Stretch"
                                                                                Command="{Binding CmdEditInputToolBlock}"
                                                                                CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=ListViewItem}, Path=DataContext}"
                                                                                Content="&#xe606;"
                                                                                FontFamily="{StaticResource Font_Ico}"
                                                                                Style="{StaticResource Style_Button_Ico}" />
                                                                        </Border>
                                                                    </Grid>
                                                                    <Grid
                                                                        Background="{StaticResource Color_DarkBackground}"
                                                                        IsEnabled="{Binding ElementName=chb_OnlyVpro, Path=IsChecked, Converter={StaticResource BoolInverseCvt}}"
                                                                        Style="{DynamicResource Grid_HiddenInVproMode}">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="0.3*" />
                                                                            <ColumnDefinition />
                                                                        </Grid.ColumnDefinitions>
                                                                        <TextBlock
                                                                            Margin="10,0"
                                                                            HorizontalAlignment="Left"
                                                                            VerticalAlignment="Center"
                                                                            Text="{DynamicResource Lan.Control_WorkEdit.HeaderDLModel}" />
                                                                        <Border Grid.Column="1" Margin="0,2,5,2">
                                                                            <Grid Margin="0.5">
                                                                                <StackPanel
                                                                                    Grid.Column="1"
                                                                                    Margin="0.5"
                                                                                    Orientation="Horizontal">
                                                                                    <CheckBox
                                                                                        x:Name="chbAdvancedDL"
                                                                                        Margin="5,0"
                                                                                        VerticalAlignment="Center"
                                                                                        Content="{DynamicResource Lan.Control_WorkEdit.TextAdvancedMode}"
                                                                                        Foreground="White"
                                                                                        IsChecked="{Binding WorkStream.WorkStreamInfo.IsUseAdvancedDLModel, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                                                    <Grid>
                                                                                        <StackPanel
                                                                                            Margin="0,0,50,0"
                                                                                            Orientation="Horizontal"
                                                                                            Visibility="{Binding ElementName=chbAdvancedDL, Path=IsChecked, Converter={StaticResource BoolToVisiblityDefaultHiddenCvt}}">
                                                                                            <ComboBox
                                                                                                Name="ws"
                                                                                                MinWidth="150"
                                                                                                VerticalContentAlignment="Center"
                                                                                                BorderThickness="0"
                                                                                                DisplayMemberPath="WorkspaceName"
                                                                                                ItemsSource="{Binding ElementName=dgDLWorksapces, Path=ItemsSource}"
                                                                                                SelectedValue="{Binding WorkStream.WorkStreamInfo.WorkspaceName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                                                                SelectedValuePath="WorkspaceName">
                                                                                                <ComboBox.Style>
                                                                                                    <Style TargetType="ComboBox">
                                                                                                        <Style.Triggers>
                                                                                                            <DataTrigger Binding="{Binding ElementName=btnResetDLWorkspace, Path=IsPressed}" Value="True">
                                                                                                                <Setter Property="SelectedIndex" Value="-1" />
                                                                                                            </DataTrigger>
                                                                                                        </Style.Triggers>
                                                                                                    </Style>
                                                                                                </ComboBox.Style>
                                                                                            </ComboBox>
                                                                                            <ComboBox
                                                                                                MinWidth="100"
                                                                                                Margin="2,0"
                                                                                                VerticalContentAlignment="Center"
                                                                                                BorderThickness="0"
                                                                                                ItemsSource="{Binding ElementName=ws, Path=SelectedItem.Streams}"
                                                                                                SelectedValue="{Binding WorkStream.WorkStreamInfo.WorkspaceStreamName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                                                                                <ComboBox.Style>
                                                                                                    <Style TargetType="ComboBox">
                                                                                                        <Style.Triggers>
                                                                                                            <DataTrigger Binding="{Binding ElementName=btnResetDLWorkspace, Path=IsPressed}" Value="True">
                                                                                                                <Setter Property="SelectedIndex" Value="-1" />
                                                                                                            </DataTrigger>
                                                                                                        </Style.Triggers>
                                                                                                    </Style>
                                                                                                </ComboBox.Style>
                                                                                            </ComboBox>
                                                                                            <Button
                                                                                                Width="30"
                                                                                                Command="{Binding CmdAddDLResultTerminalsDLOutputTB}"
                                                                                                CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=ListViewItem}, Path=DataContext}"
                                                                                                Content="&#xe60d;"
                                                                                                FontFamily="{StaticResource Font_Ico}"
                                                                                                Style="{StaticResource Style_Button_Ico}" />
                                                                                        </StackPanel>

                                                                                        <!--  编辑高级DL模式  -->
                                                                                        <Button
                                                                                            Margin="0,0,30,0"
                                                                                            HorizontalAlignment="Stretch"
                                                                                            Command="{Binding CmdEditAdvancedDLModel}"
                                                                                            Content="&#xe606;"
                                                                                            FontFamily="{StaticResource Font_Ico}"
                                                                                            Style="{StaticResource Style_Button_Ico}"
                                                                                            Visibility="{Binding ElementName=chbAdvancedDL, Path=IsChecked, Converter={StaticResource BoolToVisiblityDefaultVisibleCvt}}">
                                                                                            <Button.CommandParameter>
                                                                                                <MultiBinding Converter="{StaticResource MultiBindingConverter_ObjectArrayCvt}">
                                                                                                    <Binding Path="DataContext" RelativeSource="{RelativeSource AncestorType=ListViewItem}" />
                                                                                                    <Binding ElementName="dgDLWorksapces" Path="ItemsSource" />
                                                                                                </MultiBinding>
                                                                                            </Button.CommandParameter>
                                                                                        </Button>
                                                                                    </Grid>
                                                                                </StackPanel>
                                                                                <Button
                                                                                    x:Name="btnResetDLWorkspace"
                                                                                    Grid.Column="1"
                                                                                    Width="30"
                                                                                    HorizontalAlignment="Right"
                                                                                    Content="&#xe6a6;"
                                                                                    FontFamily="{StaticResource Font_Ico}"
                                                                                    FontSize="16"
                                                                                    Style="{StaticResource Style_Button_Ico}" />
                                                                            </Grid>
                                                                        </Border>
                                                                    </Grid>
                                                                    <Grid
                                                                        Height="30"
                                                                        Margin="0,2"
                                                                        Background="{StaticResource Color_DarkBackground}">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="0.3*" />
                                                                            <ColumnDefinition />
                                                                        </Grid.ColumnDefinitions>
                                                                        <TextBlock
                                                                            Margin="10,0"
                                                                            HorizontalAlignment="Left"
                                                                            VerticalAlignment="Center">
                                                                            <TextBlock.Style>
                                                                                <Style TargetType="TextBlock">
                                                                                    <Style.Triggers>
                                                                                        <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=local:Control_WorkEdit}, Path=DataContext.IsDLEnable}" Value="true">
                                                                                            <Setter Property="Text" Value="{DynamicResource Lan.Control_WorkEdit.TextOutputTB}" />
                                                                                        </DataTrigger>
                                                                                        <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=local:Control_WorkEdit}, Path=DataContext.IsDLEnable}" Value="false">
                                                                                            <Setter Property="Text" Value="{DynamicResource Lan.Control_WorkEdit.TextAlgorithmTB}" />
                                                                                        </DataTrigger>
                                                                                    </Style.Triggers>
                                                                                </Style>
                                                                            </TextBlock.Style>
                                                                        </TextBlock>
                                                                        <Border Grid.Column="1" Margin="0,2,5,2">
                                                                            <Button
                                                                                Grid.Column="1"
                                                                                Height="30"
                                                                                HorizontalAlignment="Stretch"
                                                                                Command="{Binding CmdEditOutputToolBlock}"
                                                                                CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=ListViewItem}, Path=DataContext}"
                                                                                Content="&#xe606;"
                                                                                FontFamily="{StaticResource Font_Ico}"
                                                                                Style="{StaticResource Style_Button_Ico}" />
                                                                        </Border>
                                                                    </Grid>
                                                                    <Grid Background="{StaticResource Color_DarkBackground}" Style="{DynamicResource Grid_HiddenInVproMode}">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="0.3*" />
                                                                            <ColumnDefinition />
                                                                        </Grid.ColumnDefinitions>
                                                                        <TextBlock
                                                                            Margin="10,0"
                                                                            HorizontalAlignment="Left"
                                                                            VerticalAlignment="Center"
                                                                            Text="{DynamicResource Lan.Control_WorkEdit.TextGPU}" />
                                                                        <Border Grid.Column="1" Margin="0,2,5,2">
                                                                            <ComboBox
                                                                                Grid.Column="1"
                                                                                MinWidth="100"
                                                                                Margin="0.5"
                                                                                VerticalContentAlignment="Center"
                                                                                BorderThickness="0"
                                                                                ItemsSource="{Binding GPUList}"
                                                                                SelectedIndex="{Binding WorkStream.WorkStreamInfo.GpuIndex, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                                        </Border>
                                                                    </Grid>
                                                                    <Grid
                                                                        Height="30"
                                                                        Margin="0,2"
                                                                        Background="{StaticResource Color_DarkBackground}">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="0.3*" />
                                                                            <ColumnDefinition />
                                                                        </Grid.ColumnDefinitions>
                                                                        <TextBlock
                                                                            Margin="10,0"
                                                                            HorizontalAlignment="Left"
                                                                            VerticalAlignment="Center"
                                                                            Text="{DynamicResource Lan.Control_WorkEdit.TextResultGraphic}" />
                                                                        <Border Grid.Column="1" Margin="0,2,5,2">
                                                                            <Grid Margin="0.5">
                                                                                <ComboBox
                                                                                    Margin="0,0,50,0"
                                                                                    VerticalContentAlignment="Center"
                                                                                    BorderThickness="0"
                                                                                    ItemsSource="{Binding ResultGraphicConstantsBindableList}"
                                                                                    SelectedIndex="0"
                                                                                    SelectedValue="{Binding WorkStream.WorkStreamInfo.ResultGraphicOption, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                                                                    <ComboBox.Style>
                                                                                        <Style TargetType="ComboBox">
                                                                                            <Style.Triggers>
                                                                                                <DataTrigger Binding="{Binding ElementName=btnResetResultGraphic, Path=IsPressed}" Value="True">
                                                                                                    <Setter Property="SelectedIndex" Value="-1" />
                                                                                                </DataTrigger>
                                                                                            </Style.Triggers>
                                                                                        </Style>
                                                                                    </ComboBox.Style>
                                                                                </ComboBox>
                                                                                <Button
                                                                                    x:Name="btnResetResultGraphic"
                                                                                    Width="30"
                                                                                    HorizontalAlignment="Right"
                                                                                    Content="&#xe6a6;"
                                                                                    FontFamily="{StaticResource Font_Ico}"
                                                                                    FontSize="16"
                                                                                    Style="{StaticResource Style_Button_Ico}" />
                                                                            </Grid>
                                                                        </Border>
                                                                    </Grid>
                                                                    <Grid
                                                                        Height="30"
                                                                        Margin="0,2"
                                                                        Background="{StaticResource Color_DarkBackground}">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="0.3*" />
                                                                            <ColumnDefinition />
                                                                        </Grid.ColumnDefinitions>
                                                                        <TextBlock
                                                                            Margin="10,0"
                                                                            HorizontalAlignment="Left"
                                                                            VerticalAlignment="Center"
                                                                            Text="{DynamicResource Lan.Control_WorkEdit.TextDisplayOption}" />
                                                                        <Grid Grid.Column="1" Margin="0.5,2.5,5.5,2.5">
                                                                            <ComboBox
                                                                                MaxWidth="340"
                                                                                Margin="0,0,50,0"
                                                                                HorizontalAlignment="Left"
                                                                                VerticalContentAlignment="Center"
                                                                                BorderThickness="0"
                                                                                ItemsSource="{Binding WorkStream.ToolBlockRecordsKeyList}"
                                                                                SelectedValue="{Binding WorkStream.WorkStreamInfo.ToolBlockRecordKey, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                                                                <ComboBox.Style>
                                                                                    <Style TargetType="ComboBox">
                                                                                        <Style.Triggers>
                                                                                            <DataTrigger Binding="{Binding ElementName=btnResetTBRecordKey, Path=IsPressed}" Value="True">
                                                                                                <Setter Property="SelectedIndex" Value="-1" />
                                                                                            </DataTrigger>
                                                                                        </Style.Triggers>
                                                                                    </Style>
                                                                                </ComboBox.Style>
                                                                            </ComboBox>
                                                                            <StackPanel HorizontalAlignment="Right" Orientation="Horizontal">
                                                                                <CheckBox
                                                                                    Margin="10,0"
                                                                                    VerticalAlignment="Center"
                                                                                    VerticalContentAlignment="Center"
                                                                                    Content="3D"
                                                                                    Foreground="White"
                                                                                    IsChecked="{Binding WorkStream.WorkStreamInfo.IsDisplay3D, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                                                <Button
                                                                                    x:Name="btnResetTBRecordKey"
                                                                                    Width="30"
                                                                                    Content="&#xe6a6;"
                                                                                    FontFamily="{StaticResource Font_Ico}"
                                                                                    FontSize="16"
                                                                                    Style="{StaticResource Style_Button_Ico}" />
                                                                            </StackPanel>
                                                                        </Grid>
                                                                    </Grid>
                                                                    <Grid
                                                                        Height="30"
                                                                        Margin="0,2"
                                                                        Background="{StaticResource Color_DarkBackground}">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="0.3*" />
                                                                            <ColumnDefinition />
                                                                        </Grid.ColumnDefinitions>
                                                                        <TextBlock
                                                                            Margin="10,0"
                                                                            HorizontalAlignment="Left"
                                                                            VerticalAlignment="Center"
                                                                            Text="{DynamicResource Lan.Control_WorkEdit.TextImageRecord}" />
                                                                        <Border Grid.Column="1" Margin="0,2,5,2">
                                                                            <Grid Margin="0.5">
                                                                                <StackPanel Margin="0,0,200,0" Orientation="Horizontal">
                                                                                    <ComboBox
                                                                                        MinWidth="100"
                                                                                        VerticalContentAlignment="Center"
                                                                                        BorderThickness="0"
                                                                                        ItemsSource="{Binding ImageRecordConstantsBindableList}"
                                                                                        SelectedValue="{Binding WorkStream.WorkStreamInfo.ImageRecordOption, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                                                                        <ComboBox.Style>
                                                                                            <Style TargetType="ComboBox">
                                                                                                <Style.Triggers>
                                                                                                    <DataTrigger Binding="{Binding ElementName=btnResetImageRecord, Path=IsPressed}" Value="True">
                                                                                                        <Setter Property="SelectedIndex" Value="-1" />
                                                                                                    </DataTrigger>
                                                                                                </Style.Triggers>
                                                                                            </Style>
                                                                                        </ComboBox.Style>
                                                                                    </ComboBox>
                                                                                    <ComboBox
                                                                                        MinWidth="50"
                                                                                        Margin="10,0"
                                                                                        VerticalContentAlignment="Center"
                                                                                        BorderThickness="0"
                                                                                        ItemsSource="{Binding OriginalImageTypeContstantsBindableList}"
                                                                                        SelectedValue="{Binding WorkStream.WorkStreamInfo.OriginalImageTypeConstant, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                                                </StackPanel>
                                                                                <StackPanel HorizontalAlignment="Right" Orientation="Horizontal">
                                                                                    <TextBlock
                                                                                        Margin="2"
                                                                                        Padding="2"
                                                                                        VerticalAlignment="Center"
                                                                                        Text="{DynamicResource Lan.Control_WorkEdit.TextCondition}" />
                                                                                    <ComboBox
                                                                                        MinWidth="50"
                                                                                        VerticalContentAlignment="Center"
                                                                                        BorderThickness="0"
                                                                                        ItemsSource="{Binding ImageRecordConditionConstantsBindableList}"
                                                                                        SelectedValue="{Binding WorkStream.WorkStreamInfo.ImageRecordConditionOption, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                                                                        <ComboBox.Style>
                                                                                            <Style TargetType="ComboBox">
                                                                                                <Style.Triggers>
                                                                                                    <DataTrigger Binding="{Binding ElementName=btnResetImageRecord, Path=IsPressed}" Value="True">
                                                                                                        <Setter Property="SelectedIndex" Value="-1" />
                                                                                                    </DataTrigger>
                                                                                                </Style.Triggers>
                                                                                            </Style>
                                                                                        </ComboBox.Style>
                                                                                    </ComboBox>
                                                                                    <Button
                                                                                        x:Name="btnResetImageRecord"
                                                                                        Width="30"
                                                                                        Margin="5,0,0,0"
                                                                                        Content="&#xe6a6;"
                                                                                        FontFamily="{StaticResource Font_Ico}"
                                                                                        FontSize="16"
                                                                                        Style="{StaticResource Style_Button_Ico}" />
                                                                                </StackPanel>
                                                                            </Grid>
                                                                        </Border>
                                                                    </Grid>
                                                                    <Grid
                                                                        Height="30"
                                                                        Margin="0,2"
                                                                        Background="{StaticResource Color_DarkBackground}">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="0.3*" />
                                                                            <ColumnDefinition />
                                                                        </Grid.ColumnDefinitions>
                                                                        <TextBlock
                                                                            Margin="10,0"
                                                                            HorizontalAlignment="Left"
                                                                            VerticalAlignment="Center"
                                                                            Text="{DynamicResource Lan.Control_WorkEdit.TextTrigger}" />
                                                                        <Border Grid.Column="1" Margin="0,2,5,2">
                                                                            <Grid Margin="0.5">
                                                                                <ComboBox
                                                                                    Margin="0,0,200,0"
                                                                                    VerticalContentAlignment="Center"
                                                                                    BorderThickness="0"
                                                                                    ItemsSource="{Binding TriggerTypeConstantsBindableList}"
                                                                                    SelectedValue="{Binding WorkStream.WorkStreamInfo.TriggerType, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                                                                    <ComboBox.Style>
                                                                                        <Style TargetType="ComboBox">
                                                                                            <Style.Triggers>
                                                                                                <DataTrigger Binding="{Binding ElementName=btnResetTrigger, Path=IsPressed}" Value="True">
                                                                                                    <Setter Property="SelectedIndex" Value="-1" />
                                                                                                </DataTrigger>
                                                                                            </Style.Triggers>
                                                                                        </Style>
                                                                                    </ComboBox.Style>
                                                                                </ComboBox>
                                                                                <StackPanel HorizontalAlignment="Right" Orientation="Horizontal">
                                                                                    <ToggleButton
                                                                                        x:Name="btn_TriggerDetail"
                                                                                        Margin="5,0"
                                                                                        Padding="2"
                                                                                        BorderBrush="Transparent"
                                                                                        Content="{DynamicResource Lan.Control_WorkEdit.BtnDetail}" />
                                                                                    <Button
                                                                                        x:Name="btnResetTrigger"
                                                                                        Width="30"
                                                                                        Content="&#xe6a6;"
                                                                                        FontFamily="{StaticResource Font_Ico}"
                                                                                        FontSize="16"
                                                                                        Style="{StaticResource Style_Button_Ico}" />
                                                                                </StackPanel>
                                                                            </Grid>
                                                                        </Border>
                                                                        <!--  触发设置详情  -->
                                                                        <Popup
                                                                            Width="300"
                                                                            Height="120"
                                                                            AllowsTransparency="False"
                                                                            IsOpen="{Binding ElementName=btn_TriggerDetail, Path=IsChecked}"
                                                                            Placement="Bottom"
                                                                            PlacementTarget="{Binding ElementName=btn_TriggerDetail}"
                                                                            PopupAnimation="Slide"
                                                                            StaysOpen="False">
                                                                            <Grid>
                                                                                <Border
                                                                                    Background="White"
                                                                                    BorderBrush="Black"
                                                                                    BorderThickness="1" />
                                                                                <Grid Margin="1">
                                                                                    <StackPanel
                                                                                        HorizontalAlignment="Center"
                                                                                        VerticalAlignment="Center"
                                                                                        Orientation="Vertical">
                                                                                        <StackPanel Margin="0,10" Orientation="Horizontal">
                                                                                            <TextBlock
                                                                                                VerticalAlignment="Center"
                                                                                                Foreground="Black"
                                                                                                Text="TCP:" />
                                                                                            <ComboBox
                                                                                                MinWidth="80"
                                                                                                Margin="5,0"
                                                                                                VerticalAlignment="Center"
                                                                                                BorderThickness="0"
                                                                                                DisplayMemberPath="TCPDevice.TCPDeviceInfo.TCPDeviceName"
                                                                                                Foreground="Black"
                                                                                                ItemsSource="{Binding ElementName=dgTCPDevice, Path=ItemsSource}"
                                                                                                SelectedValue="{Binding WorkStream.WorkStreamInfo.TCPReceiverName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                                                                SelectedValuePath="TCPDevice.TCPDeviceInfo.TCPDeviceName">
                                                                                                <ComboBox.Style>
                                                                                                    <Style TargetType="ComboBox">
                                                                                                        <Style.Triggers>
                                                                                                            <DataTrigger Binding="{Binding ElementName=btnResetTrigger, Path=IsPressed}" Value="True">
                                                                                                                <Setter Property="SelectedIndex" Value="-1" />
                                                                                                            </DataTrigger>
                                                                                                            <DataTrigger Binding="{Binding WorkStream.WorkStreamInfo.TriggerType}" Value="IO">
                                                                                                                <Setter Property="IsEnabled" Value="False" />
                                                                                                            </DataTrigger>
                                                                                                            <DataTrigger Binding="{Binding WorkStream.WorkStreamInfo.TriggerType}" Value="FFP">
                                                                                                                <Setter Property="IsEnabled" Value="False" />
                                                                                                            </DataTrigger>
                                                                                                        </Style.Triggers>
                                                                                                    </Style>
                                                                                                </ComboBox.Style>
                                                                                            </ComboBox>
                                                                                        </StackPanel>
                                                                                        <StackPanel Orientation="Horizontal">
                                                                                            <TextBlock
                                                                                                VerticalAlignment="Center"
                                                                                                Foreground="Black"
                                                                                                Text="IO:  " />
                                                                                            <ComboBox
                                                                                                MinWidth="80"
                                                                                                Margin="6,0"
                                                                                                VerticalAlignment="Center"
                                                                                                BorderThickness="0"
                                                                                                ItemsSource="{Binding IOInputConstantsBindableList}"
                                                                                                SelectedValue="{Binding WorkStream.WorkStreamInfo.IOInputConstant, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                                                                                <ComboBox.Style>
                                                                                                    <Style TargetType="ComboBox">
                                                                                                        <Style.Triggers>
                                                                                                            <DataTrigger Binding="{Binding ElementName=btnResetTrigger, Path=IsPressed}" Value="True">
                                                                                                                <Setter Property="SelectedIndex" Value="-1" />
                                                                                                            </DataTrigger>
                                                                                                            <DataTrigger Binding="{Binding WorkStream.WorkStreamInfo.TriggerType}" Value="TCP">
                                                                                                                <Setter Property="IsEnabled" Value="False" />
                                                                                                            </DataTrigger>
                                                                                                            <DataTrigger Binding="{Binding WorkStream.WorkStreamInfo.TriggerType}" Value="FFP">
                                                                                                                <Setter Property="IsEnabled" Value="False" />
                                                                                                            </DataTrigger>
                                                                                                        </Style.Triggers>
                                                                                                    </Style>
                                                                                                </ComboBox.Style>
                                                                                            </ComboBox>
                                                                                        </StackPanel>
                                                                                        <StackPanel Margin="0,10" Orientation="Horizontal">
                                                                                            <TextBlock
                                                                                                VerticalAlignment="Center"
                                                                                                Foreground="Black"
                                                                                                Text="FFP:" />
                                                                                            <ComboBox
                                                                                                MinWidth="80"
                                                                                                Margin="6,0"
                                                                                                VerticalAlignment="Center"
                                                                                                BorderThickness="0"
                                                                                                ItemsSource="{Binding SoftEventConstantsBindableList}"
                                                                                                SelectedValue="{Binding WorkStream.WorkStreamInfo.SoftEventConstant, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                                                                                <ComboBox.Style>
                                                                                                    <Style TargetType="ComboBox">
                                                                                                        <Style.Triggers>
                                                                                                            <DataTrigger Binding="{Binding ElementName=btnResetTrigger, Path=IsPressed}" Value="True">
                                                                                                                <Setter Property="SelectedIndex" Value="-1" />
                                                                                                            </DataTrigger>
                                                                                                            <DataTrigger Binding="{Binding WorkStream.WorkStreamInfo.TriggerType}" Value="TCP">
                                                                                                                <Setter Property="IsEnabled" Value="False" />
                                                                                                            </DataTrigger>
                                                                                                            <DataTrigger Binding="{Binding WorkStream.WorkStreamInfo.TriggerType}" Value="IO">
                                                                                                                <Setter Property="IsEnabled" Value="False" />
                                                                                                            </DataTrigger>
                                                                                                        </Style.Triggers>
                                                                                                    </Style>
                                                                                                </ComboBox.Style>
                                                                                            </ComboBox>
                                                                                        </StackPanel>
                                                                                    </StackPanel>
                                                                                </Grid>
                                                                            </Grid>
                                                                        </Popup>
                                                                    </Grid>
                                                                    <Grid
                                                                        Height="30"
                                                                        Margin="0,2"
                                                                        Background="{StaticResource Color_DarkBackground}">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="0.3*" />
                                                                            <ColumnDefinition />
                                                                        </Grid.ColumnDefinitions>
                                                                        <TextBlock
                                                                            Margin="10,0"
                                                                            HorizontalAlignment="Left"
                                                                            VerticalAlignment="Center"
                                                                            Text="{DynamicResource Lan.Control_WorkEdit.TextResultSend}" />
                                                                        <Border Grid.Column="1" Margin="0,2,5,2">
                                                                            <Grid Margin="0.5">
                                                                                <ComboBox
                                                                                    Margin="0,0,200,0"
                                                                                    VerticalContentAlignment="Center"
                                                                                    BorderThickness="0"
                                                                                    ItemsSource="{Binding ResultSendTypeConstantsBindableList}"
                                                                                    SelectedValue="{Binding WorkStream.WorkStreamInfo.ResultSenderType, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                                                                    <ComboBox.Style>
                                                                                        <Style TargetType="ComboBox">
                                                                                            <Style.Triggers>
                                                                                                <DataTrigger Binding="{Binding ElementName=btnResetResultSend, Path=IsPressed}" Value="True">
                                                                                                    <Setter Property="SelectedIndex" Value="-1" />
                                                                                                </DataTrigger>
                                                                                            </Style.Triggers>
                                                                                        </Style>
                                                                                    </ComboBox.Style>
                                                                                </ComboBox>
                                                                                <StackPanel HorizontalAlignment="Right" Orientation="Horizontal">
                                                                                    <ToggleButton
                                                                                        x:Name="btn_ResultSendDetail"
                                                                                        Margin="5,0"
                                                                                        Padding="2"
                                                                                        BorderBrush="Transparent"
                                                                                        Content="{DynamicResource Lan.Control_WorkEdit.BtnDetail}" />
                                                                                    <Button
                                                                                        x:Name="btnResetResultSend"
                                                                                        Width="30"
                                                                                        Content="&#xe6a6;"
                                                                                        FontFamily="{StaticResource Font_Ico}"
                                                                                        FontSize="16"
                                                                                        Style="{StaticResource Style_Button_Ico}" />
                                                                                    <!--  结果发送设置详情  -->
                                                                                    <Popup
                                                                                        Width="200"
                                                                                        Height="100"
                                                                                        AllowsTransparency="False"
                                                                                        IsOpen="{Binding ElementName=btn_ResultSendDetail, Path=IsChecked}"
                                                                                        Placement="Bottom"
                                                                                        PlacementTarget="{Binding ElementName=btn_ResultSendDetail}"
                                                                                        PopupAnimation="Slide"
                                                                                        StaysOpen="False">
                                                                                        <Grid>
                                                                                            <Border
                                                                                                Background="White"
                                                                                                BorderBrush="Black"
                                                                                                BorderThickness="1" />
                                                                                            <Grid Margin="1">
                                                                                                <StackPanel
                                                                                                    HorizontalAlignment="Center"
                                                                                                    VerticalAlignment="Center"
                                                                                                    Orientation="Vertical">
                                                                                                    <StackPanel Margin="0,10" Orientation="Horizontal">
                                                                                                        <TextBlock
                                                                                                            Margin="2"
                                                                                                            Padding="2"
                                                                                                            VerticalAlignment="Center"
                                                                                                            Foreground="Black"
                                                                                                            Text="{DynamicResource Lan.Control_WorkEdit.TextTCPSend}" />
                                                                                                        <ComboBox
                                                                                                            MinWidth="50"
                                                                                                            VerticalAlignment="Center"
                                                                                                            BorderThickness="0"
                                                                                                            DisplayMemberPath="TCPDevice.TCPDeviceInfo.TCPDeviceName"
                                                                                                            Foreground="Black"
                                                                                                            ItemsSource="{Binding ElementName=dgTCPDevice, Path=ItemsSource}"
                                                                                                            SelectedValue="{Binding WorkStream.WorkStreamInfo.TCPSenderName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                                                                            SelectedValuePath="TCPDevice.TCPDeviceInfo.TCPDeviceName">
                                                                                                            <ComboBox.Style>
                                                                                                                <Style TargetType="ComboBox">
                                                                                                                    <Style.Triggers>
                                                                                                                        <DataTrigger Binding="{Binding ElementName=btnResetResultSend, Path=IsPressed}" Value="True">
                                                                                                                            <Setter Property="SelectedIndex" Value="-1" />
                                                                                                                        </DataTrigger>
                                                                                                                        <DataTrigger Binding="{Binding WorkStream.WorkStreamInfo.ResultSenderType}" Value="IO">
                                                                                                                            <Setter Property="IsEnabled" Value="False" />
                                                                                                                        </DataTrigger>
                                                                                                                    </Style.Triggers>
                                                                                                                </Style>
                                                                                                            </ComboBox.Style>
                                                                                                        </ComboBox>
                                                                                                    </StackPanel>
                                                                                                    <StackPanel Orientation="Horizontal">
                                                                                                        <TextBlock
                                                                                                            Margin="2"
                                                                                                            Padding="2"
                                                                                                            VerticalAlignment="Center"
                                                                                                            Foreground="Black"
                                                                                                            Text="{DynamicResource Lan.Control_WorkEdit.TextLineNum}" />
                                                                                                        <ComboBox
                                                                                                            MinWidth="50"
                                                                                                            VerticalAlignment="Center"
                                                                                                            BorderThickness="0"
                                                                                                            ItemsSource="{Binding IOOutputConstantsBindableList}"
                                                                                                            SelectedValue="{Binding WorkStream.WorkStreamInfo.IOOutputConstant, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                                                                                            <ComboBox.Style>
                                                                                                                <Style TargetType="ComboBox">
                                                                                                                    <Style.Triggers>
                                                                                                                        <DataTrigger Binding="{Binding ElementName=btnResetResultSend, Path=IsPressed}" Value="True">
                                                                                                                            <Setter Property="SelectedIndex" Value="-1" />
                                                                                                                        </DataTrigger>
                                                                                                                        <DataTrigger Binding="{Binding WorkStream.WorkStreamInfo.ResultSenderType}" Value="TCP">
                                                                                                                            <Setter Property="IsEnabled" Value="False" />
                                                                                                                        </DataTrigger>
                                                                                                                    </Style.Triggers>
                                                                                                                </Style>
                                                                                                            </ComboBox.Style>
                                                                                                        </ComboBox>
                                                                                                    </StackPanel>
                                                                                                </StackPanel>
                                                                                            </Grid>
                                                                                        </Grid>
                                                                                    </Popup>
                                                                                </StackPanel>
                                                                            </Grid>
                                                                        </Border>
                                                                    </Grid>
                                                                    <Grid
                                                                        Height="30"
                                                                        Margin="0,2"
                                                                        Background="{StaticResource Color_DarkBackground}">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="0.3*" />
                                                                            <ColumnDefinition />
                                                                        </Grid.ColumnDefinitions>
                                                                        <TextBlock
                                                                            Margin="10,0"
                                                                            HorizontalAlignment="Left"
                                                                            VerticalAlignment="Center"
                                                                            Text="{DynamicResource Lan.Control_WorkEdit.TextChartSeries}" />
                                                                        <Border Grid.Column="1" Margin="0,2,5,2">
                                                                            <xceed:IntegerUpDown
                                                                                Grid.Column="1"
                                                                                Margin="0.5"
                                                                                BorderBrush="Black"
                                                                                BorderThickness="0"
                                                                                DefaultValue="0"
                                                                                Maximum="10"
                                                                                Minimum="0"
                                                                                Value="{Binding WorkStream.WorkStreamInfo.ResultChartSeriesCount, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                                        </Border>
                                                                    </Grid>
                                                                    <Grid
                                                                        Height="30"
                                                                        Margin="0,2"
                                                                        Background="{StaticResource Color_DarkBackground}">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="0.3*" />
                                                                            <ColumnDefinition />
                                                                        </Grid.ColumnDefinitions>
                                                                        <TextBlock
                                                                            Margin="10,0"
                                                                            HorizontalAlignment="Left"
                                                                            VerticalAlignment="Center"
                                                                            Text="{DynamicResource Lan.Control_WorkEdit.TextDisable}" />
                                                                        <CheckBox
                                                                            Grid.Column="1"
                                                                            HorizontalAlignment="Left"
                                                                            VerticalAlignment="Center"
                                                                            IsChecked="{Binding WorkStream.WorkStreamInfo.IsStreamDisable, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                                    </Grid>
                                                                    <Button
                                                                        Margin="0,2"
                                                                        Command="{Binding ElementName=gridEditWorkStream, Path=DataContext.CmdExpandWorkStreamItem}"
                                                                        Content="{DynamicResource Lan.Control_WorkEdit.BtnImageReplay}"
                                                                        FontWeight="Bold">
                                                                        <Button.CommandParameter>
                                                                            <MultiBinding Converter="{StaticResource MultiBindingConverter_ObjectArrayCvt}">
                                                                                <Binding Path="DataContext" RelativeSource="{RelativeSource AncestorType=ListViewItem}" />
                                                                                <Binding ElementName="cbImageSource" Path="SelectedItem" />
                                                                            </MultiBinding>
                                                                        </Button.CommandParameter>
                                                                    </Button>
                                                                </StackPanel>
                                                            </Grid>
                                                        </Expander>
                                                    </Grid>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </ListView.ItemContainerStyle>
                            </ListView>
                            <!--  配方管理  -->
                            <Popup
                                Width="600"
                                Height="600"
                                AllowsTransparency="True"
                                IsOpen="{Binding ElementName=btn_EditRecipes, Path=IsChecked}"
                                Placement="Bottom"
                                PlacementTarget="{Binding ElementName=btn_EditRecipes}"
                                PopupAnimation="Slide"
                                StaysOpen="False">
                                <Popup.Effect>
                                    <DropShadowEffect
                                        BlurRadius="15"
                                        Direction="-90"
                                        Opacity="0.7"
                                        ShadowDepth="0" />
                                </Popup.Effect>
                                <Grid Margin="10">
                                    <Border
                                        Background="{DynamicResource Color_DarkBackground}"
                                        BorderBrush="Gray"
                                        BorderThickness="1" />
                                    <Grid Margin="1">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="30" />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <StackPanel HorizontalAlignment="Right" Orientation="Horizontal">
                                            <Button
                                                Width="20"
                                                Height="20"
                                                Margin="2"
                                                Command="{Binding ElementName=dgWorkStreams, Path=SelectedItem.CmdAddWorkStreamRecipe}"
                                                Content="&#xe651;"
                                                FontFamily="{StaticResource Font_Ico}"
                                                FontSize="12"
                                                Style="{StaticResource Style_Button_Ico}"
                                                ToolTip="{DynamicResource Lan.Control_WorkStreamRecipes.BtnAddRecipe}" />
                                            <Button
                                                Width="20"
                                                Height="20"
                                                Margin="5,2"
                                                Command="{Binding ElementName=dgWorkStreams, Path=SelectedItem.CmdRemoveWorkStreamRecipe}"
                                                CommandParameter="{Binding ElementName=listRecipes, Path=SelectedItem}"
                                                Content="&#xe67a;"
                                                FontFamily="{StaticResource Font_Ico}"
                                                FontSize="16"
                                                FontWeight="Bold"
                                                Style="{StaticResource Style_Button_Ico}"
                                                ToolTip="{DynamicResource Lan.Control_WorkStreamRecipes.BtnRemoveRecipe}" />
                                        </StackPanel>
                                        <ListView
                                            x:Name="listRecipes"
                                            Grid.Row="1"
                                            Background="{DynamicResource Color_DarkBackground}"
                                            BorderThickness="0,2,0,0"
                                            ItemsSource="{Binding ElementName=dgWorkStreams, Path=SelectedItem.WorkStream.Recipes}"
                                            ScrollViewer.HorizontalScrollBarVisibility="Disabled">
                                            <ListView.ItemContainerStyle>
                                                <Style TargetType="ListViewItem">
                                                    <Setter Property="Margin" Value="0,2" />
                                                    <Setter Property="Template">
                                                        <Setter.Value>
                                                            <ControlTemplate TargetType="ListViewItem">
                                                                <Border
                                                                    Background="{TemplateBinding Background}"
                                                                    BorderBrush="Gray"
                                                                    BorderThickness="0,0,0,2">
                                                                    <Grid>
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="50" />
                                                                            <ColumnDefinition />
                                                                        </Grid.ColumnDefinitions>
                                                                        <StackPanel Orientation="Vertical">
                                                                            <ToggleButton
                                                                                Width="30"
                                                                                Height="30"
                                                                                Margin="2"
                                                                                HorizontalAlignment="Center"
                                                                                Content="&#xe71c;"
                                                                                FontFamily="{StaticResource Font_Ico}"
                                                                                FontSize="14"
                                                                                FontWeight="Bold"
                                                                                IsChecked="{Binding DisableLabelModify, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                                                ToolTip="{DynamicResource Lan.Control_WorkStreamRecipes.TextDesableChangingDiscriptionLabel}">
                                                                                <ToggleButton.Style>
                                                                                    <Style TargetType="ToggleButton">
                                                                                        <Style.Triggers>
                                                                                            <Trigger Property="IsChecked" Value="True">
                                                                                                <Setter Property="Foreground" Value="Gray" />
                                                                                            </Trigger>
                                                                                        </Style.Triggers>
                                                                                    </Style>
                                                                                </ToggleButton.Style>
                                                                            </ToggleButton>
                                                                            <Button
                                                                                Width="30"
                                                                                Height="30"
                                                                                Margin="2"
                                                                                HorizontalAlignment="Center"
                                                                                Command="{Binding ElementName=dgWorkStreams, Path=SelectedItem.CmdLoadWorkStreamRecipe}"
                                                                                CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=ListViewItem}, Path=DataContext}"
                                                                                Content="&#xe689;"
                                                                                FontFamily="{StaticResource Font_Ico}"
                                                                                FontSize="12"
                                                                                FontWeight="Bold"
                                                                                Style="{StaticResource Style_Button_Ico}"
                                                                                ToolTip="{DynamicResource Lan.Control_WorkStreamRecipes.BtnImportRecipe}" />
                                                                        </StackPanel>
                                                                        <Expander
                                                                            Grid.Column="1"
                                                                            BorderThickness="0"
                                                                            Header="{Binding RecipeName}"
                                                                            Style="{StaticResource Style_Expander}">
                                                                            <Grid>
                                                                                <Border
                                                                                    Margin="2"
                                                                                    BorderBrush="Gray"
                                                                                    BorderThickness="0.5"
                                                                                    CornerRadius="0">
                                                                                    <Grid>
                                                                                        <Grid.RowDefinitions>
                                                                                            <RowDefinition Height="30" />
                                                                                            <RowDefinition />
                                                                                        </Grid.RowDefinitions>
                                                                                        <Border>
                                                                                            <TextBlock
                                                                                                Padding="3"
                                                                                                HorizontalAlignment="Center"
                                                                                                VerticalAlignment="Center"
                                                                                                Text="{DynamicResource Lan.Control_WorkStreamRecipes.TextParaList}" />
                                                                                        </Border>
                                                                                        <DataGrid
                                                                                            Grid.Row="1"
                                                                                            MinWidth="200"
                                                                                            Margin="0"
                                                                                            BorderThickness="0"
                                                                                            ItemsSource="{Binding Values}"
                                                                                            Style="{StaticResource Style_DataGrid}">
                                                                                            <DataGrid.Columns>
                                                                                                <DataGridTemplateColumn Width="150" Header="{DynamicResource Lan.Control_WorkEdit.TextName}">
                                                                                                    <DataGridTemplateColumn.CellTemplate>
                                                                                                        <DataTemplate>
                                                                                                            <TextBlock
                                                                                                                Padding="3"
                                                                                                                VerticalAlignment="Center"
                                                                                                                FontWeight="Bold"
                                                                                                                Text="{Binding Key}" />
                                                                                                        </DataTemplate>
                                                                                                    </DataGridTemplateColumn.CellTemplate>
                                                                                                </DataGridTemplateColumn>
                                                                                                <DataGridTemplateColumn Width="*" Header="{DynamicResource Lan.Control_WorkEdit.TextType}">
                                                                                                    <DataGridTemplateColumn.CellTemplate>
                                                                                                        <DataTemplate>
                                                                                                            <TextBlock
                                                                                                                Padding="3"
                                                                                                                VerticalAlignment="Center"
                                                                                                                Text="{Binding Type}"
                                                                                                                ToolTip="{Binding Type}" />
                                                                                                        </DataTemplate>
                                                                                                    </DataGridTemplateColumn.CellTemplate>
                                                                                                </DataGridTemplateColumn>
                                                                                                <DataGridTemplateColumn Width="*" Header="{DynamicResource Lan.Control_WorkStreamRecipes.TextValue}">
                                                                                                    <DataGridTemplateColumn.CellTemplate>
                                                                                                        <DataTemplate>
                                                                                                            <TextBlock
                                                                                                                Padding="3"
                                                                                                                VerticalAlignment="Center"
                                                                                                                Text="{Binding Value}"
                                                                                                                ToolTip="{Binding Value}" />
                                                                                                        </DataTemplate>
                                                                                                    </DataGridTemplateColumn.CellTemplate>
                                                                                                </DataGridTemplateColumn>
                                                                                                <DataGridTemplateColumn Width="*" Header="{DynamicResource Lan.Control_WorkStreamRecipes.TextDescriptionLabel}">
                                                                                                    <DataGridTemplateColumn.CellTemplate>
                                                                                                        <DataTemplate>
                                                                                                            <TextBox
                                                                                                                Margin="3"
                                                                                                                Padding="3"
                                                                                                                VerticalAlignment="Center"
                                                                                                                Background="LightGray"
                                                                                                                FontWeight="Bold"
                                                                                                                IsReadOnly="{Binding RelativeSource={RelativeSource AncestorType=Expander}, Path=DataContext.DisableLabelModify}"
                                                                                                                Text="{Binding Label, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                                                                                ToolTip="{Binding Label}" />
                                                                                                        </DataTemplate>
                                                                                                    </DataGridTemplateColumn.CellTemplate>
                                                                                                </DataGridTemplateColumn>
                                                                                            </DataGrid.Columns>
                                                                                        </DataGrid>
                                                                                    </Grid>
                                                                                </Border>
                                                                            </Grid>
                                                                        </Expander>
                                                                    </Grid>
                                                                </Border>
                                                            </ControlTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                    <Style.Triggers>
                                                        <Trigger Property="IsFocused" Value="True">
                                                            <Setter Property="IsSelected" Value="True" />
                                                        </Trigger>
                                                        <Trigger Property="IsSelected" Value="True">
                                                            <Setter Property="Background" Value="{StaticResource Color_Selected}" />
                                                        </Trigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </ListView.ItemContainerStyle>
                                        </ListView>
                                    </Grid>
                                </Grid>
                            </Popup>
                        </Grid>
                    </Expander>
                </StackPanel>
            </Border>
        </ScrollViewer>
    </Grid>
</UserControl>
